import{u as k,E as Ve,G as Ke,h as x,k as lt,m as P,I as he,o as Dt,U as je,L as Fe,d as C,a as S,e as E,F as mt,r as yt,O as Bt,j as ut,Z as kt,n as R,y as nt,i as Ye,t as ht,x as N,B as wt,H as Xe,c as q,af as qe,ag as Ze,g as O,ah as Lt,w as ft,z as Qe,ai as Gt,b as it,P as Ot,N as Je}from"./framework.a8c70d05.js";function tn(e){return Ve()?(Ke(e),!0):!1}function en(e){return typeof e=="function"?e():k(e)}const nn=typeof window<"u";function Qt(e){var t;const n=en(e);return(t=n==null?void 0:n.$el)!=null?t:n}const an=nn?window:void 0;function sn(){const e=P(!1);return he()&&Dt(()=>{e.value=!0}),e}function rn(e){const t=sn();return x(()=>(t.value,!!e()))}var Jt=Object.getOwnPropertySymbols,on=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,un=(e,t)=>{var n={};for(var a in e)on.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&Jt)for(var a of Jt(e))t.indexOf(a)<0&&ln.call(e,a)&&(n[a]=e[a]);return n};function cn(e,t,n={}){const a=n,{window:s=an}=a,i=un(a,["window"]);let r;const o=rn(()=>s&&"ResizeObserver"in s),c=()=>{r&&(r.disconnect(),r=void 0)},h=x(()=>Array.isArray(e)?e.map(m=>Qt(m)):[Qt(e)]),d=lt(h,m=>{if(c(),o.value&&s){r=new ResizeObserver(t);for(const y of m)y&&r.observe(y,i)}},{immediate:!0,flush:"post",deep:!0}),v=()=>{c(),d()};return tn(v),{isSupported:o,stop:v}}function hn(){try{return"constructor"in GestureEvent}catch{return!1}}function fe(){return typeof window<"u"&&"ontouchstart"in window}function de(e){return"pointerId"in e?null:e.type==="touchend"?e.changedTouches:e.targetTouches}function Yt(e){return Array.from(de(e)).map(t=>t.identifier)}function X(e){const t="buttons"in e?e.buttons:0,{shiftKey:n,altKey:a,metaKey:s,ctrlKey:i}=e;return{buttons:t,shiftKey:n,altKey:a,metaKey:s,ctrlKey:i}}const Tt=e=>e;function vt(e,t=Tt){const n=de(e),{clientX:a,clientY:s}=n?n[0]:e;return t([a,s])}function te(e,t,n=Tt){const[a,s]=Array.from(e.touches).filter(y=>t.includes(y.identifier));if(!a||!s)throw Error("The event doesn't have two pointers matching the pointerIds");const i=s.clientX-a.clientX,r=s.clientY-a.clientY,o=(s.clientX+a.clientX)/2,c=(s.clientY+a.clientY)/2,h=Math.hypot(i,r),d=-(Math.atan2(i,r)*180)/Math.PI,v=n([h,d]),m=n([o,c]);return{values:v,origin:m}}function fn(e,t=Tt){const{scrollX:n,scrollY:a,scrollLeft:s,scrollTop:i}=e.currentTarget;return t([n||s||0,a||i||0])}const ee=40,ne=800;function pe(e,t=Tt){let{deltaX:n,deltaY:a,deltaMode:s}=e;return s===1?(n*=ee,a*=ee):s===2&&(n*=ne,a*=ne),t([n,a])}function ae(e,t=Tt){return t([e.scale,e.rotation])}function ve(){}function me(...e){return e.length===0?ve:e.length===1?e[0]:function(){var t;for(let n of e)t=n.apply(this,arguments)||t;return t}}function rt(e,t){if(e===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function se(e,t){return Object.assign({},t,e||{})}function $t(e,...t){return typeof e=="function"?e(...t):e}function bt(e){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:ve,canceled:!1,memo:void 0,args:void 0,...e}}function ye(){const e={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=bt({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),n=bt({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),a=bt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=bt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=bt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:e,drag:t,pinch:n,wheel:a,move:s,scroll:i}}class dn{constructor(t){this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=fe(),this.supportsGestureEvents=hn(),this.bind=(...n)=>{const a={};for(let s of this.classes)new s(this,n).addBindings(a);for(let s in this.nativeRefs)L(a,s,i=>this.nativeRefs[s]({...this.state.shared,event:i,args:n}));return this.config.domTarget?yn(this,a):gn(this,a)},this.clean=()=>{const{eventOptions:n,domTarget:a}=this.config,s=k(a);s&&It(s,Se(this.domListeners),n),Object.values(this.timeouts).forEach(clearTimeout),pn(this)},this.classes=t,this.state=ye(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function ge(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(Yt(t))}function xe(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):Yt(t).forEach(n=>e.touchIds.delete(n))}function pn(e){const{config:{window:t,eventOptions:n},windowListeners:a}=e,s=k(t);if(s){for(let i in a){const r=a[i];It(s,r,n)}e.windowListeners={}}}function vn({config:e,windowListeners:t},n,a=e.eventOptions){const s=k(e.window);s&&(It(s,t[n],a),delete t[n])}function mn({config:e,windowListeners:t},n,a=[],s=e.eventOptions){const i=k(e.window);i&&(It(i,t[n],s),be(i,t[n]=a,s))}function yn({config:e,domListeners:t},n){const{eventOptions:a,domTarget:s}=e,i=k(s);if(!i)throw new Error("domTarget must be defined");It(i,Se(t),a);for(let[r,o]of Object.entries(n)){const c=r.slice(2).toLowerCase();t.push([c,me(...o)])}be(i,t,a)}function gn({config:e},t){const n={},a=e.eventOptions.capture?"Capture":"";for(let[s,i]of Object.entries(t)){const r=Array.isArray(i)?i:[i],o=s+a;n[o]=me(...r)}return n}function Se(e=[]){return e.splice(0,e.length)}function L(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function be(e,t=[],n={}){if(e)for(let[a,s]of t)e.addEventListener(a,s,n)}function It(e,t=[],n={}){if(e)for(let[a,s]of t)e.removeEventListener(a,s,n)}function Rt(e,t){return e.map((n,a)=>n+t[a])}function Xt(e,t){return e.map((n,a)=>n-t[a])}function Et(e){return Math.hypot(...e)}function Me(e,t=e){const n=Et(t),a=n===0?0:1/n,s=t.map(r=>a*r);return{distance:Et(e),direction:s}}function we(e,t,n){const a=Et(t),s=a===0?0:1/a,i=n===0?0:1/n,r=i*a,o=t.map(d=>i*d),c=t.map(d=>s*d),h=Et(e);return{velocities:o,velocity:r,distance:h,direction:c}}function Wt(e){return Math.sign?Math.sign(e):+(e>0)-+(e<0)||+e}function xn(e,t,n){return Math.max(t,Math.min(e,n))}function Sn(e,t){return Math.pow(e,t*5)}function ie(e,t,n){return t===0||Math.abs(t)===1/0?Sn(e,n):e*t*n/(t+n*e)}function re(e,t,n,a=.15){return a===0?xn(e,t,n):e<t?-ie(t-e,n-t,a)+t:e>n?+ie(e-n,n-t,a)+n:e}const V=new Map,bn=e=>e;class _e{constructor(t,n=[]){this.controller=t,this.args=n,this.debounced=!0,this.setTimeout=(a,s=140,...i)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(a,s,...i)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(a=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!a&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const c=this.state.active,h=this.state._active;this.state.active=h,this.state.first=h&&!c,this.state.last=c&&!h,this.controller.state.shared[this.ingKey]=h}const s=this.controller.pointerIds.size||this.controller.touchIds.size,i=this.controller.state.shared.buttons>0||s>0,r={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:s,down:i},o=this.handler(r);return this.state.memo=o!==void 0?o:this.state.memo,r},this.controller=t,this.args=n}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||bn}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,n){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:n,threshold:a}=this.config,{_bounds:s,_initial:i,_active:r,_intentional:o,lastOffset:c,movement:h}=this.state,d=this.getInternalMovement(t,this.state),v=this.transform(a).map(Math.abs),m=o[0]===!1?oe(d[0],v[0]):o[0],y=o[1]===!1?oe(d[1],v[1]):o[1],M=this.checkIntentionality([m,y],d);if(M._blocked)return{...M,_movement:d,delta:[0,0]};const u=M._intentional,b=d;let w=[u[0]!==!1?d[0]-u[0]:0,u[1]!==!1?d[1]-u[1]:0];const D=Rt(w,c),I=r?n:[0,0];return w=le(s,Rt(w,i),I),{...M,intentional:u[0]!==!1||u[1]!==!1,_initial:i,_movement:b,movement:w,values:t,offset:le(s,D,I),delta:Xt(w,h)}}clean(){this.clearTimeout()}}function oe(e,t){return Math.abs(e)>=t?Wt(e)*t:!1}function le(e,[t,n],[a,s]){const[[i,r],[o,c]]=e;return[re(t,i,r,a),re(n,o,c,s)]}function $({state:e},t,n){const{timeStamp:a,type:s}=t,i=e.values,r=n?0:a-e.startTime;return{_lastEventType:s,event:t,timeStamp:a,elapsedTime:r,previous:i}}function dt({state:e,config:t,stateKey:n,args:a},s,i){const r=e.offset,o=i.timeStamp,{initial:c,bounds:h}=t,d={...ye()[n],_active:!0,args:a,values:s,initial:s,offset:r,lastOffset:r,startTime:o};return{...d,_initial:$t(c,d),_bounds:$t(h,d)}}class Ht extends _e{getInternalMovement(t,n){return Xt(t,n.initial)}checkIntentionality(t,n){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[a,s]=n.map(Math.abs),i=this.state.axis||(a>s?"x":a<s?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:i}:i?this.config.axis&&i!==this.config.axis?{_intentional:t,_blocked:!0,axis:i}:(t[i==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:i}):{_intentional:[!1,!1],_blocked:!1,axis:i}}getKinematics(t,n){const a=this.getMovement(t);if(!a._blocked){const s=n.timeStamp-this.state.timeStamp;Object.assign(a,we(a.movement,a.delta,s))}return a}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}const Mn=3;function ue(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}class ke extends Ht{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:n,pointerId:a}=t;n&&"setPointerCapture"in n&&n.setPointerCapture(a),this.updateGestureState({_dragTarget:n,_dragPointerId:a})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:n}=this.state;if(n&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(n)))try{t.releasePointerCapture(n)}catch{}},this.preventScroll=t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()},this.getEventId=t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId,this.isValidEvent=t=>this.state._pointerId===this.getEventId(t),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=t=>{ue(t),mn(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)},this.setUpDelayedDragTrigger=t=>{this.state._dragDelayed=!0,ue(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)},this.setStartState=t=>{const n=vt(t,this.transform);this.updateSharedState(X(t)),this.updateGestureState({...dt(this,n,t),...$(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(n))},this.onDragStart=t=>{ge(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))},this.onDragChange=t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let n;if(document.pointerLockElement){const{movementX:c,movementY:h}=t;n=Rt(this.transform([c,h]),this.state.values)}else n=vt(t,this.transform);const a=this.getKinematics(n,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&a.axis)if(a.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const s=X(t);this.updateSharedState(s);const i=$(this,t),r=Et(a._movement);let{_dragIsTap:o}=this.state;o&&r>=Mn&&(o=!1),this.updateGestureState({...i,...a,_dragIsTap:o}),this.fireGestureHandler()},this.onDragEnd=t=>{if(xe(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const n=this.state._dragIsTap,[a,s]=this.state.velocities,[i,r]=this.state.movement,[o,c]=this.state._intentional,[h,d]=this.config.swipeVelocity,[v,m]=this.config.swipeDistance,y=this.config.swipeDuration,M={...$(this,t),...this.getMovement(this.state.values)},u=[0,0];M.elapsedTime<y&&(o!==!1&&Math.abs(a)>h&&Math.abs(i)>v&&(u[0]=Wt(a)),c!==!1&&Math.abs(s)>d&&Math.abs(r)>m&&(u[1]=Wt(s))),this.updateSharedState({buttons:0}),this.updateGestureState({...M,tap:n,swipe:u}),this.fireGestureHandler(this.config.filterTaps&&n===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),vn(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),je(this.fireGestureHandler))},this.onClick=t=>{this.state._dragIsTap||t.stopPropagation()}}startDrag(t,n=!1){!this.state._active||this.state._dragStarted||(n||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(L(t,"onTouchStart",this.onDragStart),L(t,"onTouchMove",this.onDragChange),L(t,"onTouchEnd",this.onDragEnd),L(t,"onTouchCancel",this.onDragEnd)):(L(t,"onPointerDown",this.onDragStart),L(t,"onPointerMove",this.onDragChange),L(t,"onPointerUp",this.onDragEnd),L(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const n=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";L(t,n,this.onClick)}}}function wn(e,t){let n,a=[],s,i=!1;function r(...o){return i&&n===this&&t(o,a)||(s=e.apply(this,o),i=!0,n=this,a=o),s}return r}function At(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let n,a,s;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!At(e[a],t[a]))return!1;return!0}let i;if(typeof Map=="function"&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;for(i=e.entries();!(a=i.next()).done;)if(!At(a.value[1],t.get(a.value[0])))return!1;return!0}if(typeof Set=="function"&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[a]))return!1;if(typeof Element<"u"&&e instanceof Element)return!1;for(a=n;a--!==0;)if(!(s[a]==="_owner"&&e.$$typeof)&&!At(e[s[a]],t[s[a]]))return!1;return!0}return e!==e&&t!==t}function _n(e,t){try{return At(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function Pt(e={},t){const n={};for(const[a,s]of Object.entries(t))switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=Pt(e[a],s);break;case"boolean":s&&(n[a]=e[a]);break}return n}const kn=180,En=.15,Dn=.5,On=50,Tn=250,Ee={threshold(e=0){return rt(e)},rubberband(e=0){switch(e){case!0:return rt(En);case!1:return rt(0);default:return rt(e)}},enabled(e=!0){return e},triggerAllEvents(e=!1){return e},initial(e=0){return typeof e=="function"?e:rt(e)},transform:!0},qt={...Ee,axis:!0,lockDirection(e=!1){return e},bounds(e={}){if(typeof e=="function")return i=>qt.bounds(e(i));const{left:t=-1/0,right:n=1/0,top:a=-1/0,bottom:s=1/0}=e;return[[t,n],[a,s]]}},In=typeof window<"u"&&window.document&&window.document.createElement,Pn={enabled(e=!0){return e},domTarget:!0,window(e=In?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform:!0},Cn={...Ee,bounds(e,t,{distanceBounds:n={},angleBounds:a={}}){const s=r=>{const o=se($t(n,r),{min:-1/0,max:1/0});return[o.min,o.max]},i=r=>{const o=se($t(a,r),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof n!="function"&&typeof a!="function"?[s(),i()]:r=>[s(r),i(r)]}},An={...qt,useTouch(e=!0){return e&&fe()},preventWindowScrollY(e=!1){return e},threshold(e,t,{filterTaps:n=!1,lockDirection:a=!1,axis:s=void 0}){const i=rt(e,n?3:a||s?1:0);return this.filterTaps=n,i},swipeVelocity(e=Dn){return rt(e)},swipeDistance(e=On){return rt(e)},swipeDuration(e=Tn){return e},delay(e=0){switch(e){case!0:return kn;case!1:return 0;default:return e}}};function De(e){return Pt(e,Pn)}function Ut(e={}){return Pt(e,qt)}function Ln(e={}){return Pt(e,Cn)}function Oe(e={}){return Pt(e,An)}function Gn({domTarget:e,eventOptions:t,window:n,enabled:a,...s}){const i=De({domTarget:e,eventOptions:t,window:n,enabled:a});return i.drag=Oe(s),i}function $n(e,t=new Set){const{drag:n,wheel:a,move:s,scroll:i,pinch:r,hover:o,eventOptions:c,window:h,transform:d,domTarget:v,enabled:m}=e,y=De({domTarget:v,eventOptions:c,transform:d,window:h,enabled:m});return t.has("onDrag")&&(y.drag=Oe(n)),t.has("onWheel")&&(y.wheel=Ut(a)),t.has("onScroll")&&(y.scroll=Ut(i)),t.has("onMove")&&(y.move=Ut(s)),t.has("onPinch")&&(y.pinch=Ln(r)),t.has("onHover")&&(y.hover={enabled:!0,...o}),y}function Te(e,t,n={}){const a=Rn(e),s=new dn(a);return s.config=t,s.handlers=e,s.nativeRefs=n,he()&&!t.manual&&(Dt(s.bind),Fe(s.clean)),s}function Rn(e){const t=new Set;return e.drag&&t.add(V.get("drag")),e.wheel&&t.add(V.get("wheel")),e.scroll&&t.add(V.get("scroll")),e.move&&t.add(V.get("move")),e.pinch&&t.add(V.get("pinch")),e.hover&&t.add(V.get("hover")),t}function Wn(e,t={}){V.set("drag",ke);const n=P();return n.value||(n.value=wn(Gn,_n)),Te({drag:e},n.value(t))}class ce extends Ht{constructor(){super(...arguments),this.ingKey="moving",this.stateKey="move",this.debounced=!0,this.onMove=t=>{this.enabled&&(this.setTimeout(this.onMoveEnd),this.state._active?this.onMoveChange(t):this.onMoveStart(t))},this.onMoveStart=t=>{this.updateSharedState(X(t));const n=vt(t,this.transform);this.updateGestureState({...dt(this,n,t),...$(this,t,!0)}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onMoveChange=t=>{this.updateSharedState(X(t));const n=vt(t,this.transform);this.updateGestureState({...$(this,t),...this.getKinematics(n,t)}),this.fireGestureHandler()},this.onMoveEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.state.values;this.updateGestureState(this.getMovement(t)),this.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),this.fireGestureHandler()},this.hoverTransform=()=>this.controller.config.hover.transform||this.controller.config.transform,this.onPointerEnter=t=>{if(this.controller.state.shared.hovering=!0,!!this.controller.config.enabled){if(this.controller.config.hover.enabled){const n=vt(t,this.hoverTransform()),a={...this.controller.state.shared,...this.state,...$(this,t,!0),args:this.args,values:n,active:!0,hovering:!0};this.controller.handlers.hover({...a,...this.mapStateValues(a)})}"move"in this.controller.handlers&&this.onMoveStart(t)}},this.onPointerLeave=t=>{if(this.controller.state.shared.hovering=!1,"move"in this.controller.handlers&&this.onMoveEnd(),!this.controller.config.hover.enabled)return;const n=vt(t,this.hoverTransform()),a={...this.controller.state.shared,...this.state,...$(this,t),args:this.args,values:n,active:!1};this.controller.handlers.hover({...a,...this.mapStateValues(a)})}}addBindings(t){"move"in this.controller.handlers&&L(t,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(L(t,"onPointerEnter",this.onPointerEnter),L(t,"onPointerLeave",this.onPointerLeave))}}class Nn extends _e{getInternalMovement(t,n){const a=n.values[1];let[s,i=a]=t,r=i-a,o=n.turns;return Math.abs(r)>270&&(o+=Wt(r)),Xt([s,i-360*o],n.initial)}getKinematics(t,n){const a=this.getMovement(t),s=(t[1]-a._movement[1]-this.state.initial[1])/360,i=n.timeStamp-this.state.timeStamp,{distance:r,velocity:o,...c}=we(a.movement,a.delta,i);return{turns:s,...a,...c}}mapStateValues(t){return{da:t.values,vdva:t.velocities}}}const Bn=7,Hn=260;class zn extends Nn{constructor(){super(...arguments),this.ingKey="pinching",this.stateKey="pinch",this.onPinchStart=t=>{ge(this.controller,t);const n=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(r=>n.has(r))||n.size<2)return;const a=Array.from(n).slice(0,2),{values:s,origin:i}=te(t,a,this.transform);this.updateSharedState(X(t)),this.updateGestureState({...dt(this,s,t),...$(this,t,!0),_pointerIds:a,cancel:this.onCancel,origin:i}),this.updateGestureState(this.getMovement(s)),this.fireGestureHandler()},this.onPinchChange=t=>{const{canceled:n,_active:a}=this.state;if(n||!a||t.timeStamp===this.state.timeStamp)return;const s=X(t);this.updateSharedState(s);try{const{values:i,origin:r}=te(t,this.state._pointerIds,this.transform),o=this.getKinematics(i,t);this.updateGestureState({...$(this,t),...o,origin:r}),this.fireGestureHandler()}catch{this.onPinchEnd(t)}},this.onPinchEnd=t=>{xe(this.controller,t);const n=Yt(t);this.state._pointerIds.every(a=>!n.includes(a))||(this.clean(),this.state._active&&(this.updateGestureState({...$(this,t),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())},this.onGestureStart=t=>{if(!this.enabled)return;t.preventDefault();const n=ae(t,this.transform);this.updateSharedState(X(t)),this.updateGestureState({...dt(this,n,t),...$(this,t,!0),origin:[t.clientX,t.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onGestureChange=t=>{const{canceled:n,_active:a}=this.state;if(n||!a)return;t.preventDefault();const s=X(t);this.updateSharedState(s);const i=ae(t,this.transform);i[0]=(i[0]-this.state.event.scale)*Hn+this.state.values[0];const r=this.getKinematics(i,t);this.updateGestureState({...$(this,t),...r,origin:[t.clientX,t.clientY]}),this.fireGestureHandler()},this.onGestureEnd=t=>{this.clean(),this.state._active&&(this.updateGestureState({...$(this,t),...this.getMovement(this.state.values),_active:!1,origin:[t.clientX,t.clientY]}),this.fireGestureHandler())},this.wheelShouldRun=t=>this.enabled&&t.ctrlKey,this.getWheelValuesFromEvent=t=>{const[,n]=pe(t,this.transform),{values:[a,s]}=this.state;return{values:[a-n*Bn,s!==void 0?s:0],origin:[t.clientX,t.clientY],delta:[0,n]}},this.onWheel=t=>{this.wheelShouldRun(t)&&(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(t):this.onWheelStart(t))},this.onWheelStart=t=>{const{values:n,delta:a,origin:s}=this.getWheelValuesFromEvent(t);t.cancelable&&t.preventDefault(),this.updateSharedState(X(t)),this.updateGestureState({...dt(this,n,t),...$(this,t,!0),initial:this.state.values,offset:n,delta:a,origin:s}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onWheelChange=t=>{t.cancelable&&t.preventDefault(),this.updateSharedState(X(t));const{values:n,origin:a,delta:s}=this.getWheelValuesFromEvent(t);this.updateGestureState({...$(this,t),...this.getKinematics(n,t),origin:a,delta:s}),this.fireGestureHandler()},this.onWheelEnd=()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())}}addBindings(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(L(t,"onGestureStart",this.onGestureStart),L(t,"onGestureChange",this.onGestureChange),L(t,"onGestureEnd",this.onGestureEnd)):(L(t,"onTouchStart",this.onPinchStart),L(t,"onTouchMove",this.onPinchChange),L(t,"onTouchEnd",this.onPinchEnd),L(t,"onTouchCancel",this.onPinchEnd),L(t,"onWheel",this.onWheel))}}class Un extends Ht{constructor(){super(...arguments),this.ingKey="scrolling",this.stateKey="scroll",this.debounced=!0,this.handleEvent=t=>{if(!this.enabled)return;this.clearTimeout(),this.setTimeout(this.onEnd);const n=fn(t,this.transform);if(this.updateSharedState(X(t)),this.state._active)this.updateGestureState({...$(this,t),...this.getKinematics(n,t)});else{this.updateGestureState({...dt(this,n,t),...$(this,t,!0),initial:this.state.values});const a=this.getMovement(n),s=Me(a.delta);this.updateGestureState(a),this.updateGestureState(s)}this.fireGestureHandler()},this.onEnd=()=>{this.clean(),this.state._active&&(this.updateGestureState({...this.getMovement(this.state.values),_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler())}}addBindings(t){L(t,"onScroll",this.handleEvent)}}class Vn extends Ht{constructor(){super(...arguments),this.ingKey="wheeling",this.stateKey="wheel",this.debounced=!0,this.handleEvent=t=>{if(t.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(X(t));const n=Rt(pe(t,this.transform),this.state.values);if(this.state._active)this.updateGestureState({...$(this,t),...this.getKinematics(n,t)});else{this.updateGestureState({...dt(this,n,t),...$(this,t,!0),initial:this.state.values});const a=this.getMovement(n),s=Me(a.delta);this.updateGestureState(a),this.updateGestureState(s)}this.fireGestureHandler()},this.onEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.getMovement(this.state.values);this.updateGestureState(t),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()}}addBindings(t){L(t,"onWheel",this.handleEvent)}}const Kn=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function jn(e){const t={},n={},a=new Set;for(let s in e)Kn.test(s)?(a.add(RegExp.lastMatch),n[s]=e[s]):t[s]=e[s];return[n,t,a]}function Fn(e,t){const[n,a,s]=jn(e);V.set("drag",ke),V.set("hover",ce),V.set("move",ce),V.set("pinch",zn),V.set("scroll",Un),V.set("wheel",Vn);const i=$n(t,s),r={};return s.has("onDrag")&&(r.drag=Mt(n,"onDrag")),s.has("onWheel")&&(r.wheel=Mt(n,"onWheel")),s.has("onScroll")&&(r.scroll=Mt(n,"onScroll")),s.has("onMove")&&(r.move=Mt(n,"onMove")),s.has("onPinch")&&(r.pinch=Mt(n,"onPinch")),s.has("onHover")&&(r.hover=n.onHover),Te(r,i,a)}function Mt(e,t){const n=t+"Start",a=t+"End";return i=>{let r;return i.first&&n in e&&e[n](i),t in e&&(r=e[t](i)),i.last&&a in e&&e[a](i),r}}const Ie=()=>({xMin:0,xMax:0,yMin:0,yMax:0,width:0,height:0}),Pe=Symbol("CoordinateContextKey");function Yn(){const e=ut(Ie());return Ot(Pe,e),e}function Xn(){return Bt(Pe,ut(Ie()))}function H(e,t=0){const n=Math.pow(10,t||0);return Math.round(e*n)/n}function gt(e,t,n=1){const a=[];for(let i=e;i<t-n/2;i+=n)a.push(i);const s=a[a.length-1]+n;return Math.abs(t-s)<n/1e-6?a.push(t):a.push(s),a}function Ce(e,t,n){return Math.min(Math.max(e,t),n)}const Ae=()=>({xPanes:[],yPanes:[],xPaneRange:[0,0],yPaneRange:[0,0]}),Le=Symbol("PaneContextKey");function qn(e){const t=ut(Ae());return lt(e,()=>{const n=2**H(Math.log2(e.xMax-e.xMin)-1),a=2**H(Math.log2(e.yMax-e.yMin)-1),s=1/8,i=n*Math.floor(e.xMin/n-s),r=n*Math.ceil(e.xMax/n+s),o=a*Math.floor(e.yMin/a-s),c=a*Math.ceil(e.yMax/a+s);t.xPanes=gt(i,r-n,n).map(h=>[h,h+n]),t.yPanes=gt(o,c-a,a).map(h=>[h,h+a]),t.xPaneRange=[i,r],t.yPaneRange=[o,c]},{immediate:!0}),Ot(Le,t),t}function at(){return Bt(Le,ut(Ae()))}const Zn=()=>({xSpan:0,ySpan:0}),Qn=Symbol("SpanContextKey");function Jn(){const e=ut(Zn());return Ot(Qn,e),e}var p;(e=>{function t(l,f){return[l[0]+f[0],l[1]+f[1]]}e.add=t;function n(l,f){return[l[0]-f[0],l[1]-f[1]]}e.sub=n;function a(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}e.mag=a;function s(l){return[-l[1],l[0]]}e.normal=s;function i(l,f,g){const _=n(f,l),T=a(_);return t(l,r(_,g*T))}e.lerp=i;function r(l,f){const g=a(l);return c(l,f/g)}e.withMag=r;function o(l){return r(l,1)}e.normalize=o;function c(l,f){return[l[0]*f,l[1]*f]}e.scale=c;function h(l,f){return[l[0]*f[0]+l[1]*f[1]+f[2],l[0]*f[3]+l[1]*f[4]+f[5]]}e.transform=h;function d(l,f){return ct(l[0]*f[0]+l[1]*f[3],l[3]*f[0]+l[4]*f[3],l[0]*f[1]+l[1]*f[4],l[3]*f[1]+l[4]*f[4],l[0]*f[2]+l[1]*f[5]+l[2],l[3]*f[2]+l[4]*f[5]+l[5])}e.matrixMult=d;function v(l,f){const g=Math.cos(f),_=Math.sin(f);return[l[0]*g-l[1]*_,l[0]*_+l[1]*g]}e.rotate=v;function m(l,f,g){const _=n(l,f);return t(f,v(_,g))}e.rotateAbout=m;function y(l,f){return i(l,f,.5)}e.midpoint=y;function M(l,f){return Math.sqrt(u(l,f))}e.dist=M;function u(l,f){return Math.pow(f[0]-l[0],2)+Math.pow(f[1]-l[1],2)}e.squareDist=u;function b(l,f){return l[0]*f[0]+l[1]*f[1]}e.dot=b;function w(l){return l[0]*l[4]-l[3]*l[1]}e.det=w;function D(l){const f=w(l);if(!f)return null;const g=1/f,_=l[0],T=l[1],G=l[2],W=l[3],z=l[4],J=l[5];return ct(g*z,g*-W,g*-T,g*_,g*(J*T-G*z),g*(-J*_+G*W))}e.matrixInvert=D;function I(l=null){const f=l||ct();return{mult:g=>I(d(g,f)),translate:(g,_)=>I(d(ct(1,0,0,1,g,_),f)),rotate:g=>{const _=Math.cos(g),T=Math.sin(g);return I(d(ct(_,T,-T,_),f))},scale:(g,_)=>I(d(ct(g,0,0,_),f)),shear:(g,_)=>I(d(ct(1,_,g,1),f)),get:()=>[...f]}}e.matrixBuilder=I;function A(l){const[f,g,_,T,G,W]=l;return`matrix(${f}, ${T}, ${g}, ${G}, ${_}, ${W})`}e.toCSS=A,e.identity=I().get()})(p||(p={}));function ct(e=1,t=0,n=0,a=1,s=0,i=0){return[e,n,s,t,a,i]}const Ge=Symbol("ViewTransformKey"),$e=Symbol("UserTransformKey");function ta(){const e=P(p.identity);return Ot(Ge,e),e}function Q(){return Bt(Ge,P(p.identity))}function Re(){const e=st(),t=P(p.identity),n=P(p.identity);return lt([e,t],()=>{n.value=p.matrixMult(e.value,t.value)},{immediate:!0}),Ot($e,n),[t,n]}function st(){return Bt($e,P(p.identity))}function ea(e){const t=P(!1),n=P(0);return Dt(()=>{lt(e,(a,s,i)=>{if(!e.value||!window)return;const r=()=>{t.value=!1,clearTimeout(n.value),n.value=setTimeout(()=>{t.value=!0},500)};window.addEventListener("scroll",r),i(()=>window.removeEventListener("scroll",r))},{immediate:!0})}),{wheelEnabled:t,handleMouseMove:()=>{t.value=!0}}}function na(e,t){const n=P(p.identity),a=P(p.identity);function s(){a.value=n.value}function i({zoom:r,pan:o}){const c=1/((r==null?void 0:r.scale)??1),h=(r==null?void 0:r.at)??[0,0],d=a.value[0],v=1/Gt(t)/d,m=1/Gt(e)/d,y=Ce(c,v,m),M=p.matrixBuilder(a.value).translate(...p.scale(h,-1)).scale(y,y).translate(...p.scale(h,1)).translate(...o??[0,0]).get();n.value=M}return ut({matrix:n,setBase:s,move:i})}const aa=["tabindex"],sa=["width","height","viewBox"],ws=C({__name:"Mafs",props:{width:{default:"auto"},height:{default:500},pan:{type:Boolean,default:!0},zoom:{type:[Boolean,Object],default:!1},viewBox:{default:e=>({x:[-3,3],y:[-3,3]})},preserveAspectRatio:{type:[String,Boolean],default:"contain"}},emits:["onClick"],setup(e,{emit:t}){const n=e,a=Yn(),s=ta(),i=Jn();qn(a),Re();const r=P(null),o=P(!1);Dt(()=>{setTimeout(()=>{o.value=!0})});const c=x(()=>n.width==="auto"?"100%":`${n.width}px`),h=P(500);cn(r,l=>{const f=l[0];h.value=f.contentRect.width});const d=x(()=>{let l=1,f=1;if(typeof n.zoom=="object"){const g=n.zoom;l=g.min,f=g.max}else n.zoom&&(l=.5,f=5);return{minZoom:l,maxZoom:f}}),v=na(wt(d.value.minZoom),wt(d.value.maxZoom)),m=wt(n.height),y=ut({x:0,y:0});lt([h,v],()=>{var l,f,g,_,T,G,W,z,J;const U=((l=n.viewBox)==null?void 0:l.padding)??.5;let B=(((g=(f=n.viewBox)==null?void 0:f.x)==null?void 0:g[0])??0)-U,j=(((T=(_=n.viewBox)==null?void 0:_.x)==null?void 0:T[1])??0)+U,F=(((W=(G=n.viewBox)==null?void 0:G.y)==null?void 0:W[0])??0)-U,Y=(((J=(z=n.viewBox)==null?void 0:z.y)==null?void 0:J[1])??0)+U;if(n.preserveAspectRatio==="contain"){const zt=h.value/m.value;if((j-B)/(Y-F)>zt){const xt=(Y+F)/2,St=(j-B)/zt/2;F=xt-St,Y=xt+St}else{const xt=(j+B)/2,St=(Y-F)*zt/2;B=xt-St,j=xt+St}}[B,F]=p.transform([B,F],v.matrix),[j,Y]=p.transform([j,Y],v.matrix);const Ct=j-B,Zt=Y-F,ze=H(1/Ct*h.value,5),Ue=H(-1/Zt*m.value,5);s.value=p.matrixBuilder().scale(ze,Ue).get(),y.x=H(B/(j-B)*h.value,10),y.y=H(Y/(F-Y)*m.value,10),[a.xMin,a.xMax,a.yMin,a.yMax,a.width,a.height]=[B,j,F,Y,h.value,m.value],[i.xSpan,i.ySpan]=[Ct,Zt]},{immediate:!0});const M=wt(!!n.zoom),u=ea(M),b=x(()=>p.matrixInvert(s.value)),w=P([0,0]),D=P([0,0]);function I(l){const f=r.value.getBoundingClientRect();return p.transform([l[0]-f.left+y.x,l[1]-f.top+y.y],b.value)}const A=Fn({onDrag:({movement:l,memo:f=[0,0],first:g,event:_})=>{if(_==null||_.stopPropagation(),g&&v.setBase(),p.mag(l)===0)return;const[T,G]=p.sub(l,f);return v.move({pan:[-T/h.value*i.xSpan,G/m.value*i.ySpan]}),g?l:f},onPinch:({first:l,movement:[f],origin:g,event:_,last:T})=>{if(!_.currentTarget||!b.value)return;l&&(v.setBase(),w.value=g,D.value=n.pan?I(g):[(a.xMin+a.xMax)/2,(a.yMin+a.yMax)/2]);let G=[0,0];n.pan&&(G=p.transform(p.sub(g,w.value),b.value)),v.move({zoom:{at:D.value,scale:f},pan:p.scale(G,-1)}),T&&v.setBase()},onWheel:({pinching:l,event:f,delta:[,g]})=>{if(l)return;f.preventDefault();const _=2/(1+Math.exp(-g/300)),T=I([f.clientX,f.clientY]);v.setBase(),v.move({zoom:{at:T,scale:1/_}})},onMousemove:()=>{M.value&&u.handleMouseMove()},onKeydown:({event:l})=>{const f=l;if(f.metaKey)return;const g={Equal:1,Minus:-1}[f.code]??0;if(!g)return;let _=.1;(f.altKey||f.metaKey)&&(_=.01),f.shiftKey&&(_=.3);const T=1+g*_,G=[(a.xMax+a.xMin)/2,(a.yMax+a.yMin)/2];v.setBase(),v.move({zoom:{at:G,scale:T}})},onClick:({event:l})=>{var f;const g=l,_=(f=r==null?void 0:r.value)==null?void 0:f.getBoundingClientRect(),T=g.clientX-_.left,G=_.bottom-g.clientY,W=T/h.value*i.xSpan+a.xMin,z=G/m.value*i.ySpan+a.yMin;t("onClick",[W,z],g)}},{domTarget:r,drag:{enabled:n.pan,threshold:1},pinch:{enabled:!!n.zoom},wheel:{enabled:u.wheelEnabled.value},eventOptions:{passive:!1}});return Xe(()=>{A.config.wheel.enabled=u.wheelEnabled.value}),(l,f)=>(S(),E("div",{ref_key:"rootRef",ref:r,class:"MafsView",tabindex:l.pan||d.value?0:1,style:R({width:c.value})},[(S(),E("svg",{width:h.value,height:m.value,viewBox:`${y.x} ${y.y} ${h.value} ${m.value}`,preserveAspectRatio:"xMidYMin",style:R({width:c.value,touchAction:n.pan?"none":"auto","--mafs-view-transform":k(p).toCSS(k(s)),"--mafs-user-transform":"transform(0,0)"})},[o.value?nt(l.$slots,"default",{key:0}):N("",!0)],12,sa))],12,aa))}}),et={foreground:"var(--mafs-fg)",background:"var(--mafs-bg)",red:"var(--mafs-red)",orange:"var(--mafs-orange)",green:"var(--mafs-green)",blue:"var(--mafs-blue)",indigo:"var(--mafs-indigo)",violet:"var(--mafs-violet)",pink:"var(--mafs-pink)",yellow:"var(--mafs-yellow)"};var _t=(e=>(e[e.N=0]="N",e[e.NE=1]="NE",e[e.E=2]="E",e[e.SE=3]="SE",e[e.S=4]="S",e[e.SW=5]="SW",e[e.W=6]="W",e[e.NW=7]="NW",e))(_t||{}),K=(e=>(e[e.HORIZONGTAL=0]="HORIZONGTAL",e[e.VERTICAL=1]="VERTICAL",e))(K||{});const pt={color:et.foreground,weight:2,fillOpacity:.15,strokeOpacity:1,strokeStyle:"solid"},Z={color:et.foreground,weight:2,opacity:1,strokeStyle:"solid"},ia=["x","y"],_s=C({name:"Text",__name:"Text",props:{color:{default:et.foreground},size:{default:30},attachDistance:{default:0},attach:{},x:{},y:{}},setup(e){const t=e,n=Q(),a=st(),s=P("middle"),i=P("middle"),r=P([0,0]);lt([()=>t.attach,()=>t.attachDistance],([c,h])=>{let d=0;c==_t.W?(s.value="end",d=-1):c==_t.E&&(s.value="start",d=1);let v=0;c==_t.N?(i.value="baseline",v=1):c==_t.S&&(i.value="hanging",v=-1),(d!==0||v!==0)&&(r.value=p.withMag([d,v],h))},{immediate:!0});const o=x(()=>p.transform([t.x,t.y],p.matrixMult(n.value,a.value)));return(c,h)=>(S(),E("text",{class:"mafs-shadow",x:o.value[0]+r.value[0],y:o.value[1]+r.value[1],style:R({fill:c.color,fontSize:c.size,dominantBaseline:i.value,textAnchor:s.value,vectorEffect:"non-scaling-stroke"})},[nt(c.$slots,"default")],12,ia))}}),We=C({__name:"Polybase",props:{filled:{},type:{default:"polygon"},points:{}},setup(e){const t=e,n=st(),a=x(()=>({...pt,...t.filled})),s=x(()=>t.points.map(i=>p.transform(i,n.value).join(" ")).join(" "));return(i,r)=>(S(),q(Je(i.type),{points:s.value,strokeWidth:a.value.weight,"stroke-dasharray":a.value.strokeStyle==="dashed"?"4,3":void 0,style:R({fill:a.value.color,fillOpacity:a.value.fillOpacity,stroke:a.value.color,strokeOpacity:a.value.strokeOpacity,strokeWidth:a.value.weight,strokeLinejoin:"round",vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)"})},null,8,["points","strokeWidth","stroke-dasharray","style"]))}}),ra=C({name:"Polygon",__name:"Polygon",props:{filled:{default:e=>pt},points:{}},setup(e){const t=e;return(n,a)=>(S(),q(We,qe(Ze(t)),null,16))}}),ks=C({name:"Polyline",__name:"Polyline",props:{filled:{default:e=>pt},points:{}},setup(e){const t=e,n=x(()=>({...pt,fillOpacity:0,...t.filled}));return(a,s)=>(S(),q(We,{type:"polyline",points:a.points,filled:n.value},null,8,["points","filled"]))}}),oa=["rx","ry","stroke-width","stroke-dasharray","transform"],la=C({name:"Ellipse",__name:"Ellipse",props:{filled:{default:e=>pt},center:{default:e=>[0,0]},radius:{default:e=>[1,1]},angle:{default:0}},setup(e){const t=e,n=Q(),a=st(),s=x(()=>({...pt,...t.filled})),i=x(()=>p.matrixBuilder().translate(...t.center).mult(a.value).scale(1,-1).mult(n.value).scale(1,-1).get()),r=x(()=>`${p.toCSS(i.value)} rotate(${t.angle*(180/Math.PI)})`);return(o,c)=>(S(),E("ellipse",{cx:0,cy:0,rx:o.radius[0],ry:o.radius[1],"stroke-width":s.value.weight,"stroke-dasharray":s.value.strokeStyle==="dashed"?"4,3":void 0,transform:r.value,style:R({stroke:s.value.color,fill:s.value.color,fillOpacity:s.value.fillOpacity,strokeOpacity:s.value.strokeOpacity,vectorEffect:"non-scaling-stroke"})},null,12,oa))}}),ua=C({name:"Circle",__name:"Circle",props:{filled:{default:e=>pt},center:{default:e=>[0,0]},radius:{default:1}},setup(e){return(t,n)=>(S(),q(la,{center:t.center,radius:[t.radius,t.radius],filled:t.filled},null,8,["center","radius","filled"]))}}),ca=["cx","cy"],Es=C({name:"Point",__name:"Point",props:{color:{default:et.foreground},opacity:{default:1},x:{},y:{}},setup(e){const t=e,n=Q(),a=st(),s=x(()=>p.transform([t.x,t.y],p.matrixMult(n.value,a.value)));return(i,r)=>(S(),E("circle",{cx:s.value[0],cy:s.value[1],r:6,style:R({fill:i.color,opacity:i.opacity})},null,12,ca))}});let ha=0;function Ne(){return ha++}const fa=["fill"],da=["x1","y1","x2","y2","marker-end","stroke-dasharray"],Ds=C({name:"Vector",__name:"Vector",props:{stroked:{default:e=>Z},tail:{default:e=>[0,0]},tip:{default:e=>[1,1]}},setup(e){const t=e,n=Q(),a=st(),s=`mafs-triangle-${Ne()}`,i=x(()=>({...Z,...t.stroked})),r=x(()=>{const o=p.matrixMult(n.value,a.value),c=p.transform(t.tail,o),h=p.transform(t.tip,o);return{pixelTail:c,pixelTip:h}});return(o,c)=>(S(),E("g",null,[O("defs",null,[O("marker",{id:s,markerWidth:8,markerHeight:8,refX:8,refY:4,orient:"auto"},[O("path",{d:"M 0 0 L 8 4 L 0 8 z",fill:i.value.color||"var(--mafs-fg)"},null,8,fa)])]),O("line",{x1:r.value.pixelTail[0],y1:r.value.pixelTail[1],x2:r.value.pixelTip[0],y2:r.value.pixelTip[1],"marker-end":`url(#${s})`,"stroke-dasharray":i.value.strokeStyle==="dashed"?"4,3":void 0,style:R({stroke:i.value.color,strokeOpacity:i.value.opacity,strokeWidth:i.value.weight,vectorEffect:"non-scaling-stroke"})},null,12,da)]))}}),Vt=C({name:"Transform",__name:"Transform",props:{matrix:{},translate:{},scale:{},rotate:{},shear:{}},setup(e){const t=e,[n,a]=Re();return lt(t,()=>{let s=p.matrixBuilder();t.matrix&&(s=s.mult(t.matrix)),t.translate&&(s=s.translate(...t.translate)),t.scale&&(s=typeof t.scale=="number"?s.scale(t.scale,t.scale):s.scale(...t.scale)),t.shear&&(s=s.shear(...t.shear)),t.rotate&&(s=s.rotate(t.rotate)),n.value=s.get()},{immediate:!0}),(s,i)=>(S(),E("g",{style:R({"--mafs-user-transform":k(p).toCSS(k(a))})},[nt(s.$slots,"default")],4))}});function pa(e,t,n){const a=Math.floor(e/n)*n,s=Math.ceil(t/n)*n;return a===s-n?[a]:gt(a,s-n,n)}function Os(e){return e===0?"0":Math.abs(Math.PI-e)<.001?"π":Math.abs(-Math.PI-e)<.001?"-π":`${H(e/Math.PI,5)}π`}function va(e){return(e%2+2)%2===0}function Ts(e){return va(e)?e.toString():""}const ma=gt(0,2*Math.PI,Math.PI/12),ya={class:"mafs-axis"},ga=["x","y","dominant-baseline","text-anchor"],xa={key:0,visibility:"hidden"},Nt=C({name:"Labels",__name:"Axis",props:{align:{default:K.HORIZONGTAL},separation:{}},setup(e){const t=e,n=Q(),a=at(),s=x(()=>!!kt().label),i=x(()=>t.align===K.VERTICAL?"central":"hanging"),r=x(()=>t.align===K.VERTICAL?void 0:"middle"),o=x(()=>t.align===K.VERTICAL?a.yPanes:a.xPanes),c=x(()=>t.align===K.VERTICAL?v=>5:v=>p.transform([v,0],n.value)[0]),h=x(()=>t.align===K.VERTICAL?v=>p.transform([0,v],n.value)[1]:v=>5),d=(v,m)=>pa(v,m,t.separation).filter(y=>Math.abs(y)>t.separation/1e6);return(v,m)=>(S(),E("g",ya,[(S(!0),E(mt,null,yt(o.value,([y,M])=>(S(),E("g",{key:`${y}, ${M}`},[(S(!0),E(mt,null,yt(d(y,M),u=>(S(),E("text",{key:u,x:c.value(u),y:h.value(u),"dominant-baseline":i.value,"text-anchor":r.value,style:R({fill:"var(--mafs-origin-color)",paintOrder:"stroke"})},[s.value?nt(v.$slots,"label",{key:0,num:u}):nt(v.$slots,"default",{key:1,num:u},()=>[Ye(ht(u)+" ",1),u<0?(S(),E("tspan",xa,"-")):N("",!0)])],12,ga))),128))]))),128))]))}}),ot={axis:!0,label:!0,lines:1},Sa={fill:"none"},ba=["width","height"],Ma=["width","height","id"],wa={stroke:"var(--grid-line-subdivision-color)"},_a={key:0},ka=["y2"],Ea=["x1","x2","y2"],Da={key:1},Oa=["x2"],Ta=["y1","x2","y2"],Ia=["width","height","fill"],Pa={stroke:"var(--mafs-line-color)"},Ca={key:0},Aa=["x2"],La=["y1","x2","y2"],Ga={key:1},$a=["y2"],Ra=["x1","x2","y2"],Wa=["x","y","width","height","fill"],Na={stroke:"var(--mafs-origin-color)"},Ba=["x1","x2"],Ha=["y1","y2"],za={class:"mafs-shadow"},Is=C({name:"Cartesian",__name:"Cartesian",props:{xAxis:{type:[Object,Boolean],default:e=>ot},yAxis:{type:[Object,Boolean],default:e=>ot},subdivisions:{type:[Number,Boolean],default:!1}},setup(e){const t=e,n=Q(),a=at(),s=`cartesian-${Ne()}`,i=x(()=>!!kt().xLabel),r=x(()=>!!kt().yLabel),o=x(()=>t.xAxis!==!1),c=x(()=>t.yAxis!==!1),h=x(()=>({subdivisions:t.subdivisions,...ot,...t.xAxis})),d=x(()=>({subdivisions:t.subdivisions,...ot,...t.yAxis})),v=x(()=>h.value.lines||1),m=x(()=>d.value.lines||1),y=x(()=>h.value.subdivisions||1),M=x(()=>d.value.subdivisions||1),u=x(()=>{const[b,w]=a.xPaneRange,[D,I]=a.yPaneRange,[A,l]=p.transform([b,D],n.value),[f,g]=p.transform([w,I],n.value),[_,T]=p.transform([v.value,-m.value],n.value),G=_/y.value,W=T/M.value;return{vxMin:A,vxMax:f,vyMin:l,vyMax:g,unitW:_,unitH:T,subUnitW:G,subUnitH:W}});return(b,w)=>(S(),E("g",Sa,[O("pattern",{x:"0",y:"0",width:u.value.unitW,height:u.value.unitH,id:s,patternUnits:"userSpaceOnUse"},[O("pattern",{width:u.value.subUnitW,height:u.value.subUnitH,id:`${s}-subdivision`,patternUnits:"userSpaceOnUse"},[O("g",wa,[o.value!==!1&&y.value>1?(S(),E("g",_a,[O("line",{x1:0,y1:0,x2:0,y2:u.value.subUnitH},null,8,ka),O("line",{x1:u.value.subUnitW,y1:0,x2:u.value.subUnitW,y2:u.value.subUnitH},null,8,Ea)])):N("",!0),c.value!==!1&&M.value>1?(S(),E("g",Da,[O("line",{x1:0,y1:0,x2:u.value.subUnitW,y2:0},null,8,Oa),O("line",{x1:0,y1:u.value.subUnitH,x2:u.value.subUnitW,y2:u.value.subUnitH},null,8,Ta)])):N("",!0)])],8,Ma),O("rect",{width:u.value.unitW,height:u.value.unitH,fill:`url(#${s}-subdivision)`},null,8,Ia),O("g",Pa,[c.value&&h.value.lines?(S(),E("g",Ca,[O("line",{x1:0,y1:0,x2:u.value.unitW,y2:0},null,8,Aa),O("line",{x1:0,y1:u.value.unitH,x2:u.value.unitW,y2:u.value.unitH},null,8,La)])):N("",!0),o.value&&d.value.lines?(S(),E("g",Ga,[O("line",{x1:0,y1:0,x2:0,y2:u.value.unitH},null,8,$a),O("line",{x1:u.value.unitW,y1:0,x2:u.value.unitW,y2:u.value.unitH},null,8,Ra)])):N("",!0)])],8,ba),O("rect",{x:u.value.vxMin,y:u.value.vyMax,width:u.value.vxMax-u.value.vxMin,height:u.value.vyMin-u.value.vyMax,fill:`url(#${s})`},null,8,Wa),O("g",Na,[o.value&&h.value.axis?(S(),E("line",{key:0,x1:u.value.vxMin,y1:0,x2:u.value.vxMax,y2:0},null,8,Ba)):N("",!0),c.value&&d.value.axis?(S(),E("line",{key:1,x1:0,y1:u.value.vyMin,x2:0,y2:u.value.vyMax},null,8,Ha)):N("",!0)]),O("g",za,[o.value&&h.value.label?(S(),q(Nt,{key:0,align:k(K).HORIZONGTAL,separation:v.value},Lt({_:2},[i.value?{name:"label",fn:ft(({num:D})=>[nt(b.$slots,"xLabel",{num:D})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0),c.value&&d.value.label?(S(),q(Nt,{key:1,align:k(K).VERTICAL,separation:m.value},Lt({_:2},[r.value?{name:"label",fn:ft(({num:D})=>[nt(b.$slots,"yLabel",{num:D})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0)])]))}}),Ua={fill:"none"},Va={stroke:"var(--grid-line-subdivision-color)"},Ka=["x2","y2"],ja={stroke:"var(--grid-line-subdivision-color)"},Fa=["data-r","rx","ry"],Ya={stroke:"var(--mafs-line-color)"},Xa=["data-r","rx","ry"],qa={stroke:"var(--mafs-origin-color)"},Za=["x1","x2"],Qa=["y1","y2"],Ja={class:"mafs-shadow"},Ps=C({name:"Polar",__name:"Polar",props:{xAxis:{type:[Object,Boolean],default:e=>ot},yAxis:{type:[Object,Boolean],default:e=>ot},lines:{default:1},subdivisions:{}},setup(e){const t=e,n=Q(),a=at(),s=x(()=>!!kt().xLabel),i=x(()=>!!kt().yLabel),r=x(()=>t.xAxis!==!1),o=x(()=>t.yAxis!==!1),c=x(()=>({...ot,...t.xAxis})),h=x(()=>({...ot,...t.yAxis})),d=x(()=>c.value.lines||t.lines||1),v=x(()=>h.value.lines||t.lines||1),m=x(()=>{const y=t.lines,M=t.subdivisions,[u,b]=a.xPaneRange,[w,D]=a.yPaneRange,[I,A]=p.transform([u,w],n.value),[l,f]=p.transform([b,D],n.value),[g,_]=p.transform([1,-1],n.value),T=[p.mag([u,w]),p.mag([u,D]),p.mag([b,w]),p.mag([b,D]),p.mag([(u+b)/2,(w+D)/2])],G=Math.min(...T)<Math.max(b-u,D-w)?0:Math.min(...T),W=Math.max(...T),z=Math.floor(G/y)*y,J=Math.ceil(W/y)*y,U=gt(z,J,y),B=M!=null?gt(z,J,y/M):[];return{vxMin:I,vxMax:l,vyMin:A,vyMax:f,scaleX:g,scaleY:_,maxRadius:J,rs:U,subRs:B}});return(y,M)=>(S(),E("g",Ua,[O("g",Va,[(S(!0),E(mt,null,yt(k(ma),u=>(S(),E("line",{key:u,x1:0,y1:0,x2:Math.cos(u)*m.value.maxRadius*m.value.scaleX,y2:-Math.sin(u)*m.value.maxRadius*m.value.scaleY},null,8,Ka))),128))]),O("g",ja,[(S(!0),E(mt,null,yt(m.value.subRs,u=>(S(),E("ellipse",{key:u,"data-r":u,cx:0,cy:0,rx:u*m.value.scaleX,ry:u*m.value.scaleY},null,8,Fa))),128))]),O("g",Ya,[(S(!0),E(mt,null,yt(m.value.rs,u=>(S(),E("ellipse",{key:u,"data-r":u,cx:0,cy:0,rx:u*m.value.scaleX,ry:u*m.value.scaleY},null,8,Xa))),128))]),O("g",qa,[r.value?(S(),E("line",{key:0,x1:m.value.vxMin,y1:0,x2:m.value.vxMax,y2:0},null,8,Za)):N("",!0),o.value?(S(),E("line",{key:1,x1:0,y1:m.value.vyMin,x2:0,y2:m.value.vyMax},null,8,Qa)):N("",!0)]),O("g",Ja,[r.value&&c.value.label?(S(),q(Nt,{key:0,align:k(K).HORIZONGTAL,separation:d.value},Lt({_:2},[s.value?{name:"label",fn:ft(({num:u})=>[nt(y.$slots,"xLabel",{num:u})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0),o.value&&h.value.label?(S(),q(Nt,{key:1,align:k(K).VERTICAL,separation:v.value},Lt({_:2},[i.value?{name:"label",fn:ft(({num:u})=>[nt(y.$slots,"yLabel",{num:u})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0)])]))}}),ts=["x1","y1","x2","y2","strokeWidth","opacity","stroke-dasharray"],es=C({name:"ThroughPoints",__name:"ThroughPoints",props:{stroked:{default:e=>Z},point1:{default:e=>[0,0]},point2:{default:e=>[0,0]}},setup(e){const t=e,n=st(),a=at(),s=x(()=>({...Z,...t.stroked})),i=x(()=>{const[r,o]=a.xPaneRange,[c,h]=a.yPaneRange,d=p.transform(t.point1,n.value),v=p.transform(t.point2,n.value),m=(v[1]-d[1])/(v[0]-d[0]);let y,M;return Math.abs(Math.atan(m))>Math.PI/4?(y=[(c-d[1])/m+d[0],c],M=[(h-d[1])/m+d[0],h]):(y=[r,m*(r-d[0])+d[1]],M=[o,m*(o-d[0])+d[1]]),{offscreen1:y,offscreen2:M}});return(r,o)=>(S(),E("line",{x1:k(H)(i.value.offscreen1[0],2),y1:k(H)(i.value.offscreen1[1],2),x2:k(H)(i.value.offscreen2[0],2),y2:k(H)(i.value.offscreen2[1],2),strokeWidth:s.value.weight,opacity:s.value.opacity,"stroke-dasharray":s.value.strokeStyle==="dashed"?"4,3":void 0,style:R({stroke:s.value.color,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,ts))}}),ns=C({name:"PointAngle",__name:"PointAngle",props:{stroked:{default:e=>Z},point:{},angle:{}},setup(e){const t=e,n=x(()=>p.add(t.point,p.rotate([1,0],t.angle)));return(a,s)=>(S(),q(es,{point1:a.point,point2:n.value,stroked:a.stroked},null,8,["point1","point2","stroked"]))}}),Cs=C({name:"PointSlope",__name:"PointSlope",props:{stroked:{default:e=>Z},point:{},slope:{}},setup(e){const t=e,n=x(()=>Math.atan(t.slope));return(a,s)=>(S(),q(ns,{point:a.point,angle:n.value,stroked:a.stroked},null,8,["point","angle","stroked"]))}}),as=["x1","y1","x2","y2","strokeWidth","opacity","strokeDasharray"],As=C({name:"Segment",__name:"Segment",props:{stroked:{default:e=>Z},point1:{default:e=>[0,0]},point2:{default:e=>[0,0]}},setup(e){const t=e,n=Q(),a=st(),s=x(()=>({...Z,...t.stroked})),i=x(()=>{const r=p.matrixMult(n.value,a.value),o=p.transform(t.point1,r),c=p.transform(t.point2,r);return{scaledPoint1:o,scaledPoint2:c}});return(r,o)=>(S(),E("line",{x1:k(H)(i.value.scaledPoint1[0],2),y1:k(H)(i.value.scaledPoint1[1],2),x2:k(H)(i.value.scaledPoint2[0],2),y2:k(H)(i.value.scaledPoint2[1],2),strokeWidth:s.value.weight,opacity:s.value.opacity,strokeDasharray:s.value.strokeStyle==="dashed"?"1,10":void 0,style:R({stroke:s.value.color})},null,12,as))}});function Be({domain:e,minDepth:t,maxDepth:n,threshold:a,fn:s,error:i,onPoint:r,midpoint:o}){const[c,h]=e;function d(v,m,y,M,u,b,w){const D=v+(m-v)*.5,I=s(D);if(u<t){d(v,D,!0,!1,u+1,b,I),d(D,m,!1,!0,u+1,I,w);return}if(u<n){const A=o(b,w);if(i(I,A)>a){d(v,D,!0,!1,u+1,b,I),d(D,m,!1,!0,u+1,I,w);return}}y&&r(v,b),r(D,I),M&&r(m,w)}d(c,h,!0,!0,0,s(c),s(h))}function ss(e,t,n,a,s){let i="M ";return Be({fn:e,error:(r,o)=>p.squareDist(r,o),onPoint:(r,[o,c])=>{Number.isFinite(o)&&Number.isFinite(c)&&(i+=`${o} ${c} L `)},midpoint:(r,o)=>p.midpoint(r,o),domain:t,minDepth:n,maxDepth:a,threshold:s}),i.substring(0,i.length-2)}function is(e,t,n,a,s,i,r){const o={fill:"",upper:"",lower:""};let c="",h="",d=!1,v=0,m=0,y=0;function M(u,b){return e==="x"?`${u} ${b}`:`${b} ${u}`}return Be({domain:a,minDepth:s,maxDepth:i,threshold:r,fn:u=>[[u,n(u)],[u,t(u)]],error:([u,b],[w,D])=>Math.max(p.squareDist(u,w),p.squareDist(b,D)),midpoint:([u,b],[w,D])=>[p.midpoint(u,w),p.midpoint(b,D)],onPoint:(u,[[,b],[,w]])=>{const D=w<b&&!d,I=w>b&&d;if(D){if(d=!0,c&&h){const A=(v+u)/2,l=(m+w)/2,f=(y+b)/2,g=(l+f)/2;c+=` ${M(A,g)} L `,h=` ${M(A,g)} L `+h,o.fill+=` M ${c} ${h.substring(0,h.length-2)} z `,o.upper+=` M ${c.substring(0,c.length-2)} `,o.lower+=` M ${h.substring(0,h.length-2)} `,c="",h=""}}else if(I){d=!1;const A=(v+u)/2,l=(m+w)/2,f=(y+b)/2,g=(l+f)/2;c+=` ${M(A,g)} L `,h=` ${M(A,g)} L `+h}d||(Number.isFinite(w)&&(c=c+` ${M(u,w)} L `),Number.isFinite(b)&&(h=` ${M(u,b)} L `+h)),v=u,m=w,y=b}}),c&&h&&(o.fill+=` M ${c} ${h.substring(0,h.length-2)} z `,o.lower+=` M ${h.substring(0,h.length-2)} `,o.upper+=` M ${c.substring(0,c.length-2)} `),o}function rs(e){const t=[],n=1/e;for(let a=1;a>0;a-=n){const s={d:"",opacity:a};t.push(s)}return t}function os(e,t){t=Ce(t,0,1);const n=e.length-1-Math.round(t*(e.length-1));return e[n]}const ls=["d"],He=C({name:"Parametric",__name:"Parametric",props:{stroked:{default:e=>Z},xy:{},t:{},minSamplingDepth:{default:8},maxSamplingDepth:{default:14}},setup(e){const t=e,n=Q(),a=x(()=>({...Z,...t.stroked})),s=x(()=>{const i=.1/-p.det(n.value);return ss(t.xy,t.t,t.minSamplingDepth,t.maxSamplingDepth,i)});return(i,r)=>(S(),E("path",{d:s.value,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:R({stroke:a.value.color,strokeOpacity:a.value.opacity,strokeWidth:a.value.weight,strokeDasharray:a.value.strokeStyle==="dashed"?"1,10":void 0,vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)"})},null,12,ls))}}),Ls=C({name:"OfX",__name:"OfX",props:{stroked:{default:e=>Z},y:{},minSamplingDepth:{},maxSamplingDepth:{}},setup(e){const t=e,n=at(),a=x(()=>i=>[i,t.y(i)]),s=x(()=>n.xPaneRange);return(i,r)=>(S(),q(He,{xy:a.value,t:s.value,minSamplingDepth:i.minSamplingDepth,maxSamplingDepth:i.maxSamplingDepth,stroked:i.stroked},null,8,["xy","t","minSamplingDepth","maxSamplingDepth","stroked"]))}}),Gs=C({name:"OfX",__name:"OfY",props:{stroked:{default:e=>Z},x:{},minSamplingDepth:{},maxSamplingDepth:{}},setup(e){const t=e,n=at(),a=x(()=>i=>[t.x(i),i]),s=x(()=>n.yPaneRange);return(i,r)=>(S(),q(He,{xy:a.value,t:s.value,minSamplingDepth:i.minSamplingDepth,maxSamplingDepth:i.maxSamplingDepth,stroked:i.stroked},null,8,["xy","t","minSamplingDepth","maxSamplingDepth","stroked"]))}});var tt=(e=>(e[e.UNBOUNDED=0]="UNBOUNDED",e[e.EQUAL=1]="EQUAL",e[e.INEQUAL=2]="INEQUAL",e))(tt||{});const us=["d"],cs=["d","strokeDasharray"],hs=["d","strokeDasharray"],$s=C({name:"Inequality",__name:"Inequality",props:{x:{},y:{},color:{},weight:{},strokeColor:{},strokeOpacity:{},fillColor:{},fillOpacity:{},minSamplingDepth:{},maxSamplingDepth:{},upperColor:{},upperOpacity:{},upperWeight:{},lowerColor:{},lowerOpacity:{},lowerWeight:{}},setup(e){const t=e,n=({x:c,y:h,color:d=et.foreground,weight:v=2,strokeColor:m=d,strokeOpacity:y=1,fillColor:M=d,fillOpacity:u=.15,minSamplingDepth:b=10,maxSamplingDepth:w=14,upperColor:D=m,upperOpacity:I=y,upperWeight:A=v,lowerColor:l=m,lowerOpacity:f=y,lowerWeight:g=v})=>({x:c,y:h,color:d,weight:v,strokeColor:m,strokeOpacity:y,fillColor:M,fillOpacity:u,minSamplingDepth:b,maxSamplingDepth:w,upperColor:D,upperOpacity:I,upperWeight:A,lowerColor:l,lowerOpacity:f,lowerWeight:g}),a=x(()=>n(t)),s=at(),i=x(()=>{const c=t.y!==void 0?t.y:t.x;let h=tt.UNBOUNDED;return c!==void 0&&"<="in c&&(h=tt.EQUAL),c!==void 0&&"<"in c&&(h=tt.INEQUAL),h}),r=x(()=>{const c=t.y!==void 0?t.y:t.x;let h=tt.UNBOUNDED;return c!==void 0&&">="in c&&(h=tt.EQUAL),c!==void 0&&">"in c&&(h=tt.INEQUAL),h}),o=x(()=>{const c=t.y!==void 0?t.y:t.x,[h,d]=s.xPaneRange,[v,m]=s.yPaneRange,y=t.y!==void 0?[h,d]:[v,m],M=t.y!==void 0?[v,m]:[h,d];let u=c["<"]??c["<="]??(()=>M[1]),b=c[">"]??c[">="]??(()=>M[0]);if(typeof u=="number"){const w=u;u=()=>w}if(typeof b=="number"){const w=b;b=()=>w}return is(t.y!==void 0?"x":"y",u,b,y,a.value.minSamplingDepth,a.value.maxSamplingDepth,.1)});return(c,h)=>(S(),E("g",null,[O("path",{d:o.value.fill,style:R({fill:a.value.fillColor,fillOpacity:a.value.fillOpacity,stroke:"none",transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,us),i.value!=k(tt).UNBOUNDED?(S(),E("path",{key:0,d:o.value.upper,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:i.value===k(tt).INEQUAL?"4,8":"",style:R({fill:"none",stroke:a.value.upperColor,strokeOpacity:a.value.upperOpacity,strokeWidth:a.value.upperWeight,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,cs)):N("",!0),r.value!=k(tt).UNBOUNDED?(S(),E("path",{key:1,d:o.value.lower,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:r.value===k(tt).INEQUAL?"4,8":"",style:R({fill:"none",stroke:a.value.lowerColor,strokeOpacity:a.value.lowerOpacity,strokeWidth:a.value.lowerWeight,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,hs)):N("",!0)]))}}),fs=["d"],Rs=C({name:"VectorField",__name:"VectorField",props:{xy:{type:Function},xyOpacity:{type:Function},step:{},opacityStep:{},color:{}},setup(e){const t=e,n=()=>1,a=({xy:c,step:h=1,xyOpacity:d=n,opacityStep:v=d===n?1:.2,color:m=et.foreground})=>({xy:c,step:h,xyOpacity:d,opacityStep:v,color:m}),s=x(()=>a(t)),i=Q(),r=at(),o=x(()=>{let c=Math.min(1,Math.max(.01,s.value.opacityStep));const h=Math.ceil(1/c);function d(m,y,M,u,b){const w=s.value.step,D=s.value.xy,I=s.value.xyOpacity;for(let A=Math.floor(y);A<=Math.ceil(M);A+=w)for(let l=Math.floor(u);l<=Math.ceil(b);l+=w){const f=[A,l],g=D([A,l]),_=p.mag(g),T=p.scale(p.normalize(g),Math.min(_,w*.75)),G=p.add(f,T),W=p.transform(f,i.value),z=p.transform(T,i.value),J=p.mag(z),U=p.transform(G,i.value),B=p.scale(p.normalize(z),Math.min(J,5)),j=p.add(U,p.rotate(B,5/6*Math.PI)),F=p.add(U,p.rotate(B,-(5/6)*Math.PI)),Y=I([A,l]),Ct=os(m,Y);Ct.d+=` M ${W[0]} ${W[1]} L ${U[0]} ${U[1]}  L ${j[0]} ${j[1]}  L ${F[0]} ${F[1]}  L ${U[0]} ${U[1]} `}}const v=rs(h);for(const[m,y]of r.xPanes)for(const[M,u]of r.yPanes)d(v,m,y,M,u);return v});return(c,h)=>(S(!0),E(mt,null,yt(o.value,(d,v)=>(S(),E("path",{d:d.d,key:v,style:R({stroke:s.value.color,fill:s.value.color,opacity:d.opacity,fillOpacity:d.opacity,strokeOpacity:d.opacity}),strokeLinecap:"round",strokeLinejoin:"round"},null,12,fs))),128))}}),ds=["cx","cy"],ps=["r","cx","cy"],vs=["cx","cy"],ms=["cx","cy"],Kt=15,jt=C({name:"MovablePoint",__name:"MovablePoint",props:{color:{default:et.pink},ctx:{}},setup(e){const t=e,n=Q(),a=st(),s=P(),i=P([0,0]),r=P(!1),o=x(()=>p.transform(t.ctx.point,p.matrixMult(n.value,a.value)));return Wn(c=>{const{last:h,movement:d,first:v,event:m}=c;m==null||m.stopPropagation();const y=t.ctx.point;if(r.value=!h,v&&(i.value=p.transform(y,a.value)),p.mag(d)===0)return;const M=p.matrixInvert(n.value),u=p.matrixInvert(a.value),b=p.transform(d,M??p.identity);t.ctx.setPoint(p.transform(p.add(i.value,b),u??p.identity))},{domTarget:s,eventOptions:{passive:!1}}),(c,h)=>(S(),E("g",{ref_key:"rootRef",ref:s,class:Qe(`mafs-movable-point ${r.value?"mafs-movable-point-dragging":""}`),style:R({"--movable-point-color":t.color,"--movable-point-ring-size":`${Kt}px`}),tabindex:0},[O("circle",{class:"mafs-movable-point-hitbox",r:30,cx:o.value[0],cy:o.value[1]},null,8,ds),O("circle",{class:"mafs-movable-point-focus",r:Kt+1,cx:o.value[0],cy:o.value[1]},null,8,ps),O("circle",{class:"mafs-movable-point-ring",r:Kt,cx:o.value[0],cy:o.value[1]},null,8,vs),O("circle",{class:"mafs-movable-point-point",r:6,cx:o.value[0],cy:o.value[1]},null,8,ms)],6))}});function Ft(e,{constrain:t=n=>n}={}){const[n,a]=e,s=P(e);let i=([r,o])=>[r,o];return t===K.HORIZONGTAL?i=([r,o])=>[r,a]:t===K.VERTICAL?i=([r,o])=>[n,o]:typeof t=="function"&&(i=t),ut({point:s,setPoint:r=>{s.value=i(r)}})}function Ws(e){const{startTime:t=0,endTime:n=1/0}=e||{},a=P(null),s=wt(t),i=P(!1);return Dt(()=>{lt(i,(r,o,c)=>{if(!window)return;let h=-1;const d=Gt(n);function v(m){m=m/1e3,a.value||(a.value=m);const y=m-a.value;if(y>=d){a.value=null,s.value=d,i.value=!1;return}s.value=Math.min(y,d),h=window.requestAnimationFrame(v)}i.value?h=window.requestAnimationFrame(v):window.cancelAnimationFrame(h),c(()=>window.cancelAnimationFrame(h))},{immediate:!0})}),{time:s,playing:i,setTime:r=>{s.value=r*1e3},start:()=>{i.value=!0},stop:()=>{a.value=null,s.value=Gt(t),i.value=!1}}}const Ns=C({__name:"TransformWidget",setup(e){const t=Ft([0,0]),n=Ft([1,1]),a=Ft([1,0],{constrain:i=>p.normalize(i)}),s=x(()=>Math.atan2(a.point[1],a.point[0]));return(i,r)=>(S(),E("g",null,[it(Vt,{translate:k(t).point},{default:ft(()=>[it(Vt,{rotate:s.value},{default:ft(()=>[it(Vt,{scale:k(n).point},{default:ft(()=>[nt(i.$slots,"default"),it(ra,{points:[[0,0],[0,1],[1,1],[1,0]],filled:{color:k(et).blue}},null,8,["filled"])]),_:3},8,["scale"]),it(ua,{center:[0,0],radius:1,filled:{strokeStyle:"dashed",strokeOpacity:.5,fillOpacity:0,color:k(et).green}},null,8,["filled"]),it(jt,{ctx:k(n),color:k(et).blue},null,8,["ctx","color"])]),_:3},8,["rotate"]),it(jt,{ctx:k(a),color:k(et).green},null,8,["ctx","color"])]),_:3},8,["translate"]),it(jt,{ctx:k(t)},null,8,["ctx"])]))}}),ys={class:"mafs-shadow",fontFamily:"monospace"},gs=["x","y"],xs=["x","y"],Ss=["x","y"],bs=["x","y"],Bs=C({name:"ViewportInfo",__name:"ViewportInfo",props:{precision:{default:3}},setup(e){const t=Xn(),n=at(),a=Q(),s=x(()=>p.transform([t.xMin,t.yMin],a.value)),i=x(()=>n.xPanes.map(o=>`(${o.join(", ")})`).join("   ")),r=x(()=>n.yPanes.map(o=>`(${o.join(", ")})`).join("   "));return(o,c)=>(S(),E("g",ys,[O("text",{x:s.value[0]+10,y:s.value[1]-70}," x: "+ht(k(t).xMin.toFixed(o.precision))+", "+ht(k(t).xMax.toFixed(o.precision)),9,gs),O("text",{x:s.value[0]+10,y:s.value[1]-50}," y: "+ht(k(t).yMin.toFixed(o.precision))+", "+ht(k(t).yMax.toFixed(o.precision)),9,xs),O("text",{x:s.value[0]+10,y:s.value[1]-30}," xPanes: "+ht(i.value),9,Ss),O("text",{x:s.value[0]+10,y:s.value[1]-10}," yPanes: "+ht(r.value),9,bs)]))}});export{Vt as $,Os as B,Es as D,ws as E,Cs as F,Bs as G,Gs as H,ks as I,Ns as K,Is as N,jt as P,st as Q,_s as R,Ft as S,Ds as U,Ps as V,Ts as W,et as X,Rs as Y,Q as a,K as b,p as c,la as d,As as e,_t as f,$s as g,He as h,Ne as j,ns as l,ra as p,Ws as q,es as r,ua as v,Ls as z};
