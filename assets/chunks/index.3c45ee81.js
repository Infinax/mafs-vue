import{u as k,aa as vt,I as qe,ab as Qe,m as I,ac as Ze,ad as Je,k as at,D as de,h as x,ae as pe,o as Dt,O as tn,E as en,d as C,a as S,e as E,F as yt,r as gt,J as Bt,j as ut,U as kt,n as R,y as nt,i as nn,t as ht,x as N,c as q,af as an,ag as sn,g as O,ah as At,w as ft,z as rn,ai as Gt,b as rt,K as Ot,H as on}from"./framework.ab10dd6e.js";function qt(e){return Ze()?(Je(e),!0):!1}function ve(e){return typeof e=="function"?e():k(e)}const ln=typeof window<"u",me=()=>{};function un(...e){if(e.length!==1)return vt(...e);const t=e[0];return typeof t=="function"?qe(Qe(()=>({get:t,set:me}))):I(t)}function Xt(e){var t;const n=ve(e);return(t=n==null?void 0:n.$el)!=null?t:n}const Ht=ln?window:void 0;function cn(...e){let t,n,a,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,a,s]=e,t=Ht):[t,n,a,s]=e,!t)return me;Array.isArray(n)||(n=[n]),Array.isArray(a)||(a=[a]);const i=[],r=()=>{i.forEach(f=>f()),i.length=0},o=(f,v,m,y)=>(f.addEventListener(v,m,y),()=>f.removeEventListener(v,m,y)),c=at(()=>[Xt(t),ve(s)],([f,v])=>{r(),f&&i.push(...n.flatMap(m=>a.map(y=>o(f,m,y,v))))},{immediate:!0,flush:"post"}),h=()=>{c(),r()};return qt(h),h}function hn(){const e=I(!1);return pe()&&Dt(()=>{e.value=!0}),e}function ye(e){const t=hn();return x(()=>(t.value,!!e()))}function Os(e,t={}){const{window:n=Ht}=t,a=ye(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function");let s;const i=I(!1),r=()=>{s&&("removeEventListener"in s?s.removeEventListener("change",o):s.removeListener(o))},o=()=>{a.value&&(r(),s=n.matchMedia(un(e).value),i.value=!!(s!=null&&s.matches),s&&("addEventListener"in s?s.addEventListener("change",o):s.addListener(o)))};return de(o),qt(()=>r()),i}var ee=Object.getOwnPropertySymbols,fn=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable,pn=(e,t)=>{var n={};for(var a in e)fn.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&ee)for(var a of ee(e))t.indexOf(a)<0&&dn.call(e,a)&&(n[a]=e[a]);return n};function vn(e,t,n={}){const a=n,{window:s=Ht}=a,i=pn(a,["window"]);let r;const o=ye(()=>s&&"ResizeObserver"in s),c=()=>{r&&(r.disconnect(),r=void 0)},h=x(()=>Array.isArray(e)?e.map(m=>Xt(m)):[Xt(e)]),f=at(h,m=>{if(c(),o.value&&s){r=new ResizeObserver(t);for(const y of m)y&&r.observe(y,i)}},{immediate:!0,flush:"post",deep:!0}),v=()=>{c(),f()};return qt(v),{isSupported:o,stop:v}}function Ts({window:e=Ht}={}){if(!e)return{x:I(0),y:I(0)};const t=I(e.scrollX),n=I(e.scrollY);return cn(e,"scroll",()=>{t.value=e.scrollX,n.value=e.scrollY},{capture:!1,passive:!0}),{x:t,y:n}}function mn(){try{return"constructor"in GestureEvent}catch{return!1}}function ge(){return typeof window<"u"&&"ontouchstart"in window}function xe(e){return"pointerId"in e?null:e.type==="touchend"?e.changedTouches:e.targetTouches}function Qt(e){return Array.from(xe(e)).map(t=>t.identifier)}function X(e){const t="buttons"in e?e.buttons:0,{shiftKey:n,altKey:a,metaKey:s,ctrlKey:i}=e;return{buttons:t,shiftKey:n,altKey:a,metaKey:s,ctrlKey:i}}const Tt=e=>e;function mt(e,t=Tt){const n=xe(e),{clientX:a,clientY:s}=n?n[0]:e;return t([a,s])}function ne(e,t,n=Tt){const[a,s]=Array.from(e.touches).filter(y=>t.includes(y.identifier));if(!a||!s)throw Error("The event doesn't have two pointers matching the pointerIds");const i=s.clientX-a.clientX,r=s.clientY-a.clientY,o=(s.clientX+a.clientX)/2,c=(s.clientY+a.clientY)/2,h=Math.hypot(i,r),f=-(Math.atan2(i,r)*180)/Math.PI,v=n([h,f]),m=n([o,c]);return{values:v,origin:m}}function yn(e,t=Tt){const{scrollX:n,scrollY:a,scrollLeft:s,scrollTop:i}=e.currentTarget;return t([n||s||0,a||i||0])}const ae=40,se=800;function Se(e,t=Tt){let{deltaX:n,deltaY:a,deltaMode:s}=e;return s===1?(n*=ae,a*=ae):s===2&&(n*=se,a*=se),t([n,a])}function ie(e,t=Tt){return t([e.scale,e.rotation])}function be(){}function Me(...e){return e.length===0?be:e.length===1?e[0]:function(){var t;for(let n of e)t=n.apply(this,arguments)||t;return t}}function ot(e,t){if(e===void 0){if(t===void 0)throw new Error("Must define fallback value if undefined is expected");e=t}return Array.isArray(e)?e:[e,e]}function re(e,t){return Object.assign({},t,e||{})}function $t(e,...t){return typeof e=="function"?e(...t):e}function Mt(e){return{_active:!1,_blocked:!1,_intentional:[!1,!1],_movement:[0,0],_initial:[0,0],_bounds:[[-1/0,1/0],[-1/0,1/0]],_lastEventType:void 0,_dragStarted:!1,_dragPreventScroll:!1,_dragIsTap:!0,_dragDelayed:!1,event:void 0,intentional:!1,values:[0,0],velocities:[0,0],delta:[0,0],movement:[0,0],offset:[0,0],lastOffset:[0,0],direction:[0,0],initial:[0,0],previous:[0,0],first:!1,last:!1,active:!1,timeStamp:0,startTime:0,elapsedTime:0,cancel:be,canceled:!1,memo:void 0,args:void 0,...e}}function _e(){const e={hovering:!1,scrolling:!1,wheeling:!1,dragging:!1,moving:!1,pinching:!1,touches:0,buttons:0,down:!1,shiftKey:!1,altKey:!1,metaKey:!1,ctrlKey:!1,locked:!1},t=Mt({_pointerId:void 0,axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0,tap:!1,swipe:[0,0]}),n=Mt({_pointerIds:[],da:[0,0],vdva:[0,0],origin:void 0,turns:0}),a=Mt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),s=Mt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0}),i=Mt({axis:void 0,xy:[0,0],vxvy:[0,0],velocity:0,distance:0});return{shared:e,drag:t,pinch:n,wheel:a,move:s,scroll:i}}class gn{constructor(t){this.classes=t,this.pointerIds=new Set,this.touchIds=new Set,this.supportsTouchEvents=ge(),this.supportsGestureEvents=mn(),this.bind=(...n)=>{const a={};for(let s of this.classes)new s(this,n).addBindings(a);for(let s in this.nativeRefs)A(a,s,i=>this.nativeRefs[s]({...this.state.shared,event:i,args:n}));return this.config.domTarget?Mn(this,a):_n(this,a)},this.clean=()=>{const{eventOptions:n,domTarget:a}=this.config,s=k(a);s&&It(s,Ee(this.domListeners),n),Object.values(this.timeouts).forEach(clearTimeout),xn(this)},this.classes=t,this.state=_e(),this.timeouts={},this.domListeners=[],this.windowListeners={}}}function we(e,t){"pointerId"in t?e.pointerIds.add(t.pointerId):e.touchIds=new Set(Qt(t))}function ke(e,t){"pointerId"in t?e.pointerIds.delete(t.pointerId):Qt(t).forEach(n=>e.touchIds.delete(n))}function xn(e){const{config:{window:t,eventOptions:n},windowListeners:a}=e,s=k(t);if(s){for(let i in a){const r=a[i];It(s,r,n)}e.windowListeners={}}}function Sn({config:e,windowListeners:t},n,a=e.eventOptions){const s=k(e.window);s&&(It(s,t[n],a),delete t[n])}function bn({config:e,windowListeners:t},n,a=[],s=e.eventOptions){const i=k(e.window);i&&(It(i,t[n],s),De(i,t[n]=a,s))}function Mn({config:e,domListeners:t},n){const{eventOptions:a,domTarget:s}=e,i=k(s);if(!i)throw new Error("domTarget must be defined");It(i,Ee(t),a);for(let[r,o]of Object.entries(n)){const c=r.slice(2).toLowerCase();t.push([c,Me(...o)])}De(i,t,a)}function _n({config:e},t){const n={},a=e.eventOptions.capture?"Capture":"";for(let[s,i]of Object.entries(t)){const r=Array.isArray(i)?i:[i],o=s+a;n[o]=Me(...r)}return n}function Ee(e=[]){return e.splice(0,e.length)}function A(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function De(e,t=[],n={}){if(e)for(let[a,s]of t)e.addEventListener(a,s,n)}function It(e,t=[],n={}){if(e)for(let[a,s]of t)e.removeEventListener(a,s,n)}function Rt(e,t){return e.map((n,a)=>n+t[a])}function Zt(e,t){return e.map((n,a)=>n-t[a])}function Et(e){return Math.hypot(...e)}function Oe(e,t=e){const n=Et(t),a=n===0?0:1/n,s=t.map(r=>a*r);return{distance:Et(e),direction:s}}function Te(e,t,n){const a=Et(t),s=a===0?0:1/a,i=n===0?0:1/n,r=i*a,o=t.map(f=>i*f),c=t.map(f=>s*f),h=Et(e);return{velocities:o,velocity:r,distance:h,direction:c}}function Wt(e){return Math.sign?Math.sign(e):+(e>0)-+(e<0)||+e}function wn(e,t,n){return Math.max(t,Math.min(e,n))}function kn(e,t){return Math.pow(e,t*5)}function oe(e,t,n){return t===0||Math.abs(t)===1/0?kn(e,n):e*t*n/(t+n*e)}function le(e,t,n,a=.15){return a===0?wn(e,t,n):e<t?-oe(t-e,n-t,a)+t:e>n?+oe(e-n,n-t,a)+n:e}const V=new Map,En=e=>e;class Ie{constructor(t,n=[]){this.controller=t,this.args=n,this.debounced=!0,this.setTimeout=(a,s=140,...i)=>{clearTimeout(this.controller.timeouts[this.stateKey]),this.controller.timeouts[this.stateKey]=window.setTimeout(a,s,...i)},this.clearTimeout=()=>{clearTimeout(this.controller.timeouts[this.stateKey])},this.fireGestureHandler=(a=!1)=>{if(this.state._blocked)return this.debounced||(this.state._active=!1,this.clean()),null;if(!a&&!this.state.intentional&&!this.config.triggerAllEvents)return null;if(this.state.intentional){const c=this.state.active,h=this.state._active;this.state.active=h,this.state.first=h&&!c,this.state.last=c&&!h,this.controller.state.shared[this.ingKey]=h}const s=this.controller.pointerIds.size||this.controller.touchIds.size,i=this.controller.state.shared.buttons>0||s>0,r={...this.controller.state.shared,...this.state,...this.mapStateValues(this.state),locked:!!document.pointerLockElement,touches:s,down:i},o=this.handler(r);return this.state.memo=o!==void 0?o:this.state.memo,r},this.controller=t,this.args=n}get config(){return this.controller.config[this.stateKey]}get enabled(){return this.controller.config.enabled&&this.config.enabled}get state(){return this.controller.state[this.stateKey]}get handler(){return this.controller.handlers[this.stateKey]}get transform(){return this.config.transform||this.controller.config.transform||En}updateSharedState(t){Object.assign(this.controller.state.shared,t)}updateGestureState(t){Object.assign(this.state,t)}checkIntentionality(t,n){return{_intentional:t,_blocked:!1}}getMovement(t){const{rubberband:n,threshold:a}=this.config,{_bounds:s,_initial:i,_active:r,_intentional:o,lastOffset:c,movement:h}=this.state,f=this.getInternalMovement(t,this.state),v=this.transform(a).map(Math.abs),m=o[0]===!1?ue(f[0],v[0]):o[0],y=o[1]===!1?ue(f[1],v[1]):o[1],M=this.checkIntentionality([m,y],f);if(M._blocked)return{...M,_movement:f,delta:[0,0]};const u=M._intentional,b=f;let _=[u[0]!==!1?f[0]-u[0]:0,u[1]!==!1?f[1]-u[1]:0];const D=Rt(_,c),P=r?n:[0,0];return _=ce(s,Rt(_,i),P),{...M,intentional:u[0]!==!1||u[1]!==!1,_initial:i,_movement:b,movement:_,values:t,offset:ce(s,D,P),delta:Zt(_,h)}}clean(){this.clearTimeout()}}function ue(e,t){return Math.abs(e)>=t?Wt(e)*t:!1}function ce(e,[t,n],[a,s]){const[[i,r],[o,c]]=e;return[le(t,i,r,a),le(n,o,c,s)]}function $({state:e},t,n){const{timeStamp:a,type:s}=t,i=e.values,r=n?0:a-e.startTime;return{_lastEventType:s,event:t,timeStamp:a,elapsedTime:r,previous:i}}function dt({state:e,config:t,stateKey:n,args:a},s,i){const r=e.offset,o=i.timeStamp,{initial:c,bounds:h}=t,f={..._e()[n],_active:!0,args:a,values:s,initial:s,offset:r,lastOffset:r,startTime:o};return{...f,_initial:$t(c,f),_bounds:$t(h,f)}}class zt extends Ie{getInternalMovement(t,n){return Zt(t,n.initial)}checkIntentionality(t,n){if(t[0]===!1&&t[1]===!1)return{_intentional:t,axis:this.state.axis};const[a,s]=n.map(Math.abs),i=this.state.axis||(a>s?"x":a<s?"y":void 0);return!this.config.axis&&!this.config.lockDirection?{_intentional:t,_blocked:!1,axis:i}:i?this.config.axis&&i!==this.config.axis?{_intentional:t,_blocked:!0,axis:i}:(t[i==="x"?1:0]=!1,{_intentional:t,_blocked:!1,axis:i}):{_intentional:[!1,!1],_blocked:!1,axis:i}}getKinematics(t,n){const a=this.getMovement(t);if(!a._blocked){const s=n.timeStamp-this.state.timeStamp;Object.assign(a,Te(a.movement,a.delta,s))}return a}mapStateValues(t){return{xy:t.values,vxvy:t.velocities}}}const Dn=3;function he(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}class Pe extends zt{constructor(){super(...arguments),this.ingKey="dragging",this.stateKey="drag",this.setPointerCapture=t=>{if(this.config.useTouch||document.pointerLockElement)return;const{target:n,pointerId:a}=t;n&&"setPointerCapture"in n&&n.setPointerCapture(a),this.updateGestureState({_dragTarget:n,_dragPointerId:a})},this.releasePointerCapture=()=>{if(this.config.useTouch||document.pointerLockElement)return;const{_dragTarget:t,_dragPointerId:n}=this.state;if(n&&t&&"releasePointerCapture"in t&&(!("hasPointerCapture"in t)||t.hasPointerCapture(n)))try{t.releasePointerCapture(n)}catch{}},this.preventScroll=t=>{this.state._dragPreventScroll&&t.cancelable&&t.preventDefault()},this.getEventId=t=>this.config.useTouch?t.changedTouches[0].identifier:t.pointerId,this.isValidEvent=t=>this.state._pointerId===this.getEventId(t),this.shouldPreventWindowScrollY=this.config.preventWindowScrollY&&this.controller.supportsTouchEvents,this.setUpWindowScrollDetection=t=>{he(t),bn(this.controller,this.stateKey,[["touchmove",this.preventScroll],["touchend",this.clean.bind(this)],["touchcancel",this.clean.bind(this)]],{passive:!1}),this.setTimeout(this.startDrag.bind(this),250,t)},this.setUpDelayedDragTrigger=t=>{this.state._dragDelayed=!0,he(t),this.setTimeout(this.startDrag.bind(this),this.config.delay,t)},this.setStartState=t=>{const n=mt(t,this.transform);this.updateSharedState(X(t)),this.updateGestureState({...dt(this,n,t),...$(this,t,!0),_pointerId:this.getEventId(t)}),this.updateGestureState(this.getMovement(n))},this.onDragStart=t=>{we(this.controller,t),!(!this.enabled||this.state._active)&&(this.setStartState(t),this.setPointerCapture(t),this.shouldPreventWindowScrollY?this.setUpWindowScrollDetection(t):this.config.delay>0?this.setUpDelayedDragTrigger(t):this.startDrag(t,!0))},this.onDragChange=t=>{if(this.state.canceled||!this.state._active||!this.isValidEvent(t)||this.state._lastEventType===t.type&&t.timeStamp===this.state.timeStamp)return;let n;if(document.pointerLockElement){const{movementX:c,movementY:h}=t;n=Rt(this.transform([c,h]),this.state.values)}else n=mt(t,this.transform);const a=this.getKinematics(n,t);if(!this.state._dragStarted){if(this.state._dragDelayed){this.startDrag(t);return}if(this.shouldPreventWindowScrollY)if(!this.state._dragPreventScroll&&a.axis)if(a.axis==="x")this.startDrag(t);else{this.state._active=!1;return}else return;else return}const s=X(t);this.updateSharedState(s);const i=$(this,t),r=Et(a._movement);let{_dragIsTap:o}=this.state;o&&r>=Dn&&(o=!1),this.updateGestureState({...i,...a,_dragIsTap:o}),this.fireGestureHandler()},this.onDragEnd=t=>{if(ke(this.controller,t),!this.isValidEvent(t)||(this.clean(),!this.state._active))return;this.state._active=!1;const n=this.state._dragIsTap,[a,s]=this.state.velocities,[i,r]=this.state.movement,[o,c]=this.state._intentional,[h,f]=this.config.swipeVelocity,[v,m]=this.config.swipeDistance,y=this.config.swipeDuration,M={...$(this,t),...this.getMovement(this.state.values)},u=[0,0];M.elapsedTime<y&&(o!==!1&&Math.abs(a)>h&&Math.abs(i)>v&&(u[0]=Wt(a)),c!==!1&&Math.abs(s)>f&&Math.abs(r)>m&&(u[1]=Wt(s))),this.updateSharedState({buttons:0}),this.updateGestureState({...M,tap:n,swipe:u}),this.fireGestureHandler(this.config.filterTaps&&n===!0)},this.clean=()=>{super.clean(),this.state._dragStarted=!1,this.releasePointerCapture(),Sn(this.controller,this.stateKey)},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({canceled:!0,_active:!1}),this.updateSharedState({buttons:0}),tn(this.fireGestureHandler))},this.onClick=t=>{this.state._dragIsTap||t.stopPropagation()}}startDrag(t,n=!1){!this.state._active||this.state._dragStarted||(n||this.setStartState(t),this.updateGestureState({_dragStarted:!0,_dragPreventScroll:!0,cancel:this.onCancel}),this.clearTimeout(),this.fireGestureHandler())}addBindings(t){if(this.config.useTouch?(A(t,"onTouchStart",this.onDragStart),A(t,"onTouchMove",this.onDragChange),A(t,"onTouchEnd",this.onDragEnd),A(t,"onTouchCancel",this.onDragEnd)):(A(t,"onPointerDown",this.onDragStart),A(t,"onPointerMove",this.onDragChange),A(t,"onPointerUp",this.onDragEnd),A(t,"onPointerCancel",this.onDragEnd)),this.config.filterTaps){const n=this.controller.config.eventOptions.capture?"onClick":"onClickCapture";A(t,n,this.onClick)}}}function On(e,t){let n,a=[],s,i=!1;function r(...o){return i&&n===this&&t(o,a)||(s=e.apply(this,o),i=!0,n=this,a=o),s}return r}function Lt(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;let n,a,s;if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(a=n;a--!==0;)if(!Lt(e[a],t[a]))return!1;return!0}let i;if(typeof Map=="function"&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i=e.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;for(i=e.entries();!(a=i.next()).done;)if(!Lt(a.value[1],t.get(a.value[0])))return!1;return!0}if(typeof Set=="function"&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i=e.entries();!(a=i.next()).done;)if(!t.has(a.value[0]))return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(a=n;a--!==0;)if(!Object.prototype.hasOwnProperty.call(t,s[a]))return!1;if(typeof Element<"u"&&e instanceof Element)return!1;for(a=n;a--!==0;)if(!(s[a]==="_owner"&&e.$$typeof)&&!Lt(e[s[a]],t[s[a]]))return!1;return!0}return e!==e&&t!==t}function Tn(e,t){try{return Lt(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}function Pt(e={},t){const n={};for(const[a,s]of Object.entries(t))switch(typeof s){case"function":n[a]=s.call(n,e[a],a,e);break;case"object":n[a]=Pt(e[a],s);break;case"boolean":s&&(n[a]=e[a]);break}return n}const In=180,Pn=.15,Cn=.5,Ln=50,An=250,Ce={threshold(e=0){return ot(e)},rubberband(e=0){switch(e){case!0:return ot(Pn);case!1:return ot(0);default:return ot(e)}},enabled(e=!0){return e},triggerAllEvents(e=!1){return e},initial(e=0){return typeof e=="function"?e:ot(e)},transform:!0},Jt={...Ce,axis:!0,lockDirection(e=!1){return e},bounds(e={}){if(typeof e=="function")return i=>Jt.bounds(e(i));const{left:t=-1/0,right:n=1/0,top:a=-1/0,bottom:s=1/0}=e;return[[t,n],[a,s]]}},Gn=typeof window<"u"&&window.document&&window.document.createElement,$n={enabled(e=!0){return e},domTarget:!0,window(e=Gn?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform:!0},Rn={...Ce,bounds(e,t,{distanceBounds:n={},angleBounds:a={}}){const s=r=>{const o=re($t(n,r),{min:-1/0,max:1/0});return[o.min,o.max]},i=r=>{const o=re($t(a,r),{min:-1/0,max:1/0});return[o.min,o.max]};return typeof n!="function"&&typeof a!="function"?[s(),i()]:r=>[s(r),i(r)]}},Wn={...Jt,useTouch(e=!0){return e&&ge()},preventWindowScrollY(e=!1){return e},threshold(e,t,{filterTaps:n=!1,lockDirection:a=!1,axis:s=void 0}){const i=ot(e,n?3:a||s?1:0);return this.filterTaps=n,i},swipeVelocity(e=Cn){return ot(e)},swipeDistance(e=Ln){return ot(e)},swipeDuration(e=An){return e},delay(e=0){switch(e){case!0:return In;case!1:return 0;default:return e}}};function Le(e){return Pt(e,$n)}function Vt(e={}){return Pt(e,Jt)}function Nn(e={}){return Pt(e,Rn)}function Ae(e={}){return Pt(e,Wn)}function Bn({domTarget:e,eventOptions:t,window:n,enabled:a,...s}){const i=Le({domTarget:e,eventOptions:t,window:n,enabled:a});return i.drag=Ae(s),i}function Hn(e,t=new Set){const{drag:n,wheel:a,move:s,scroll:i,pinch:r,hover:o,eventOptions:c,window:h,transform:f,domTarget:v,enabled:m}=e,y=Le({domTarget:v,eventOptions:c,transform:f,window:h,enabled:m});return t.has("onDrag")&&(y.drag=Ae(n)),t.has("onWheel")&&(y.wheel=Vt(a)),t.has("onScroll")&&(y.scroll=Vt(i)),t.has("onMove")&&(y.move=Vt(s)),t.has("onPinch")&&(y.pinch=Nn(r)),t.has("onHover")&&(y.hover={enabled:!0,...o}),y}function Ge(e,t,n={}){const a=zn(e),s=new gn(a);return s.config=t,s.handlers=e,s.nativeRefs=n,pe()&&!t.manual&&(Dt(s.bind),en(s.clean)),s}function zn(e){const t=new Set;return e.drag&&t.add(V.get("drag")),e.wheel&&t.add(V.get("wheel")),e.scroll&&t.add(V.get("scroll")),e.move&&t.add(V.get("move")),e.pinch&&t.add(V.get("pinch")),e.hover&&t.add(V.get("hover")),t}function Un(e,t={}){V.set("drag",Pe);const n=I();return n.value||(n.value=On(Bn,Tn)),Ge({drag:e},n.value(t))}class fe extends zt{constructor(){super(...arguments),this.ingKey="moving",this.stateKey="move",this.debounced=!0,this.onMove=t=>{this.enabled&&(this.setTimeout(this.onMoveEnd),this.state._active?this.onMoveChange(t):this.onMoveStart(t))},this.onMoveStart=t=>{this.updateSharedState(X(t));const n=mt(t,this.transform);this.updateGestureState({...dt(this,n,t),...$(this,t,!0)}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onMoveChange=t=>{this.updateSharedState(X(t));const n=mt(t,this.transform);this.updateGestureState({...$(this,t),...this.getKinematics(n,t)}),this.fireGestureHandler()},this.onMoveEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.state.values;this.updateGestureState(this.getMovement(t)),this.updateGestureState({velocities:[0,0],velocity:0,_active:!1}),this.fireGestureHandler()},this.hoverTransform=()=>this.controller.config.hover.transform||this.controller.config.transform,this.onPointerEnter=t=>{if(this.controller.state.shared.hovering=!0,!!this.controller.config.enabled){if(this.controller.config.hover.enabled){const n=mt(t,this.hoverTransform()),a={...this.controller.state.shared,...this.state,...$(this,t,!0),args:this.args,values:n,active:!0,hovering:!0};this.controller.handlers.hover({...a,...this.mapStateValues(a)})}"move"in this.controller.handlers&&this.onMoveStart(t)}},this.onPointerLeave=t=>{if(this.controller.state.shared.hovering=!1,"move"in this.controller.handlers&&this.onMoveEnd(),!this.controller.config.hover.enabled)return;const n=mt(t,this.hoverTransform()),a={...this.controller.state.shared,...this.state,...$(this,t),args:this.args,values:n,active:!1};this.controller.handlers.hover({...a,...this.mapStateValues(a)})}}addBindings(t){"move"in this.controller.handlers&&A(t,"onPointerMove",this.onMove),"hover"in this.controller.handlers&&(A(t,"onPointerEnter",this.onPointerEnter),A(t,"onPointerLeave",this.onPointerLeave))}}class Vn extends Ie{getInternalMovement(t,n){const a=n.values[1];let[s,i=a]=t,r=i-a,o=n.turns;return Math.abs(r)>270&&(o+=Wt(r)),Zt([s,i-360*o],n.initial)}getKinematics(t,n){const a=this.getMovement(t),s=(t[1]-a._movement[1]-this.state.initial[1])/360,i=n.timeStamp-this.state.timeStamp,{distance:r,velocity:o,...c}=Te(a.movement,a.delta,i);return{turns:s,...a,...c}}mapStateValues(t){return{da:t.values,vdva:t.velocities}}}const Kn=7,jn=260;class Yn extends Vn{constructor(){super(...arguments),this.ingKey="pinching",this.stateKey="pinch",this.onPinchStart=t=>{we(this.controller,t);const n=this.controller.touchIds;if(!this.enabled||this.state._active&&this.state._pointerIds.every(r=>n.has(r))||n.size<2)return;const a=Array.from(n).slice(0,2),{values:s,origin:i}=ne(t,a,this.transform);this.updateSharedState(X(t)),this.updateGestureState({...dt(this,s,t),...$(this,t,!0),_pointerIds:a,cancel:this.onCancel,origin:i}),this.updateGestureState(this.getMovement(s)),this.fireGestureHandler()},this.onPinchChange=t=>{const{canceled:n,_active:a}=this.state;if(n||!a||t.timeStamp===this.state.timeStamp)return;const s=X(t);this.updateSharedState(s);try{const{values:i,origin:r}=ne(t,this.state._pointerIds,this.transform),o=this.getKinematics(i,t);this.updateGestureState({...$(this,t),...o,origin:r}),this.fireGestureHandler()}catch{this.onPinchEnd(t)}},this.onPinchEnd=t=>{ke(this.controller,t);const n=Qt(t);this.state._pointerIds.every(a=>!n.includes(a))||(this.clean(),this.state._active&&(this.updateGestureState({...$(this,t),...this.getMovement(this.state.values),_active:!1}),this.fireGestureHandler()))},this.onCancel=()=>{this.state.canceled||(this.updateGestureState({_active:!1,canceled:!0}),this.fireGestureHandler())},this.onGestureStart=t=>{if(!this.enabled)return;t.preventDefault();const n=ie(t,this.transform);this.updateSharedState(X(t)),this.updateGestureState({...dt(this,n,t),...$(this,t,!0),origin:[t.clientX,t.clientY],cancel:this.onCancel}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onGestureChange=t=>{const{canceled:n,_active:a}=this.state;if(n||!a)return;t.preventDefault();const s=X(t);this.updateSharedState(s);const i=ie(t,this.transform);i[0]=(i[0]-this.state.event.scale)*jn+this.state.values[0];const r=this.getKinematics(i,t);this.updateGestureState({...$(this,t),...r,origin:[t.clientX,t.clientY]}),this.fireGestureHandler()},this.onGestureEnd=t=>{this.clean(),this.state._active&&(this.updateGestureState({...$(this,t),...this.getMovement(this.state.values),_active:!1,origin:[t.clientX,t.clientY]}),this.fireGestureHandler())},this.wheelShouldRun=t=>this.enabled&&t.ctrlKey,this.getWheelValuesFromEvent=t=>{const[,n]=Se(t,this.transform),{values:[a,s]}=this.state;return{values:[a-n*Kn,s!==void 0?s:0],origin:[t.clientX,t.clientY],delta:[0,n]}},this.onWheel=t=>{this.wheelShouldRun(t)&&(this.setTimeout(this.onWheelEnd),this.state._active?this.onWheelChange(t):this.onWheelStart(t))},this.onWheelStart=t=>{const{values:n,delta:a,origin:s}=this.getWheelValuesFromEvent(t);t.cancelable&&t.preventDefault(),this.updateSharedState(X(t)),this.updateGestureState({...dt(this,n,t),...$(this,t,!0),initial:this.state.values,offset:n,delta:a,origin:s}),this.updateGestureState(this.getMovement(n)),this.fireGestureHandler()},this.onWheelChange=t=>{t.cancelable&&t.preventDefault(),this.updateSharedState(X(t));const{values:n,origin:a,delta:s}=this.getWheelValuesFromEvent(t);this.updateGestureState({...$(this,t),...this.getKinematics(n,t),origin:a,delta:s}),this.fireGestureHandler()},this.onWheelEnd=()=>{this.clean(),this.state._active&&(this.state._active=!1,this.updateGestureState(this.getMovement(this.state.values)),this.fireGestureHandler())}}addBindings(t){this.controller.config.domTarget&&!this.controller.supportsTouchEvents&&this.controller.supportsGestureEvents?(A(t,"onGestureStart",this.onGestureStart),A(t,"onGestureChange",this.onGestureChange),A(t,"onGestureEnd",this.onGestureEnd)):(A(t,"onTouchStart",this.onPinchStart),A(t,"onTouchMove",this.onPinchChange),A(t,"onTouchEnd",this.onPinchEnd),A(t,"onTouchCancel",this.onPinchEnd),A(t,"onWheel",this.onWheel))}}class Fn extends zt{constructor(){super(...arguments),this.ingKey="scrolling",this.stateKey="scroll",this.debounced=!0,this.handleEvent=t=>{if(!this.enabled)return;this.clearTimeout(),this.setTimeout(this.onEnd);const n=yn(t,this.transform);if(this.updateSharedState(X(t)),this.state._active)this.updateGestureState({...$(this,t),...this.getKinematics(n,t)});else{this.updateGestureState({...dt(this,n,t),...$(this,t,!0),initial:this.state.values});const a=this.getMovement(n),s=Oe(a.delta);this.updateGestureState(a),this.updateGestureState(s)}this.fireGestureHandler()},this.onEnd=()=>{this.clean(),this.state._active&&(this.updateGestureState({...this.getMovement(this.state.values),_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler())}}addBindings(t){A(t,"onScroll",this.handleEvent)}}class Xn extends zt{constructor(){super(...arguments),this.ingKey="wheeling",this.stateKey="wheel",this.debounced=!0,this.handleEvent=t=>{if(t.ctrlKey&&"pinch"in this.controller.handlers||!this.enabled)return;this.setTimeout(this.onEnd),this.updateSharedState(X(t));const n=Rt(Se(t,this.transform),this.state.values);if(this.state._active)this.updateGestureState({...$(this,t),...this.getKinematics(n,t)});else{this.updateGestureState({...dt(this,n,t),...$(this,t,!0),initial:this.state.values});const a=this.getMovement(n),s=Oe(a.delta);this.updateGestureState(a),this.updateGestureState(s)}this.fireGestureHandler()},this.onEnd=()=>{if(this.clean(),!this.state._active)return;const t=this.getMovement(this.state.values);this.updateGestureState(t),this.updateGestureState({_active:!1,velocities:[0,0],velocity:0}),this.fireGestureHandler()}}addBindings(t){A(t,"onWheel",this.handleEvent)}}const qn=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Qn(e){const t={},n={},a=new Set;for(let s in e)qn.test(s)?(a.add(RegExp.lastMatch),n[s]=e[s]):t[s]=e[s];return[n,t,a]}function Zn(e,t){const[n,a,s]=Qn(e);V.set("drag",Pe),V.set("hover",fe),V.set("move",fe),V.set("pinch",Yn),V.set("scroll",Fn),V.set("wheel",Xn);const i=Hn(t,s),r={};return s.has("onDrag")&&(r.drag=_t(n,"onDrag")),s.has("onWheel")&&(r.wheel=_t(n,"onWheel")),s.has("onScroll")&&(r.scroll=_t(n,"onScroll")),s.has("onMove")&&(r.move=_t(n,"onMove")),s.has("onPinch")&&(r.pinch=_t(n,"onPinch")),s.has("onHover")&&(r.hover=n.onHover),Ge(r,i,a)}function _t(e,t){const n=t+"Start",a=t+"End";return i=>{let r;return i.first&&n in e&&e[n](i),t in e&&(r=e[t](i)),i.last&&a in e&&e[a](i),r}}const $e=()=>({xMin:0,xMax:0,yMin:0,yMax:0,width:0,height:0}),Re=Symbol("CoordinateContextKey");function Jn(){const e=ut($e());return Ot(Re,e),e}function ta(){return Bt(Re,ut($e()))}function H(e,t=0){const n=Math.pow(10,t||0);return Math.round(e*n)/n}function xt(e,t,n=1){const a=[];for(let i=e;i<t-n/2;i+=n)a.push(i);const s=a[a.length-1]+n;return Math.abs(t-s)<n/1e-6?a.push(t):a.push(s),a}function We(e,t,n){return Math.min(Math.max(e,t),n)}const Ne=()=>({xPanes:[],yPanes:[],xPaneRange:[0,0],yPaneRange:[0,0]}),Be=Symbol("PaneContextKey");function ea(e){const t=ut(Ne());return at(e,()=>{const n=2**H(Math.log2(e.xMax-e.xMin)-1),a=2**H(Math.log2(e.yMax-e.yMin)-1),s=1/8,i=n*Math.floor(e.xMin/n-s),r=n*Math.ceil(e.xMax/n+s),o=a*Math.floor(e.yMin/a-s),c=a*Math.ceil(e.yMax/a+s);t.xPanes=xt(i,r-n,n).map(h=>[h,h+n]),t.yPanes=xt(o,c-a,a).map(h=>[h,h+a]),t.xPaneRange=[i,r],t.yPaneRange=[o,c]},{immediate:!0}),Ot(Be,t),t}function st(){return Bt(Be,ut(Ne()))}const na=()=>({xSpan:0,ySpan:0}),aa=Symbol("SpanContextKey");function sa(){const e=ut(na());return Ot(aa,e),e}var p;(e=>{function t(l,d){return[l[0]+d[0],l[1]+d[1]]}e.add=t;function n(l,d){return[l[0]-d[0],l[1]-d[1]]}e.sub=n;function a(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}e.mag=a;function s(l){return[-l[1],l[0]]}e.normal=s;function i(l,d,g){const w=n(d,l),T=a(w);return t(l,r(w,g*T))}e.lerp=i;function r(l,d){const g=a(l);return c(l,d/g)}e.withMag=r;function o(l){return r(l,1)}e.normalize=o;function c(l,d){return[l[0]*d,l[1]*d]}e.scale=c;function h(l,d){return[l[0]*d[0]+l[1]*d[1]+d[2],l[0]*d[3]+l[1]*d[4]+d[5]]}e.transform=h;function f(l,d){return ct(l[0]*d[0]+l[1]*d[3],l[3]*d[0]+l[4]*d[3],l[0]*d[1]+l[1]*d[4],l[3]*d[1]+l[4]*d[4],l[0]*d[2]+l[1]*d[5]+l[2],l[3]*d[2]+l[4]*d[5]+l[5])}e.matrixMult=f;function v(l,d){const g=Math.cos(d),w=Math.sin(d);return[l[0]*g-l[1]*w,l[0]*w+l[1]*g]}e.rotate=v;function m(l,d,g){const w=n(l,d);return t(d,v(w,g))}e.rotateAbout=m;function y(l,d){return i(l,d,.5)}e.midpoint=y;function M(l,d){return Math.sqrt(u(l,d))}e.dist=M;function u(l,d){return Math.pow(d[0]-l[0],2)+Math.pow(d[1]-l[1],2)}e.squareDist=u;function b(l,d){return l[0]*d[0]+l[1]*d[1]}e.dot=b;function _(l){return l[0]*l[4]-l[3]*l[1]}e.det=_;function D(l){const d=_(l);if(!d)return null;const g=1/d,w=l[0],T=l[1],G=l[2],W=l[3],z=l[4],J=l[5];return ct(g*z,g*-W,g*-T,g*w,g*(J*T-G*z),g*(-J*w+G*W))}e.matrixInvert=D;function P(l=null){const d=l||ct();return{mult:g=>P(f(g,d)),translate:(g,w)=>P(f(ct(1,0,0,1,g,w),d)),rotate:g=>{const w=Math.cos(g),T=Math.sin(g);return P(f(ct(w,T,-T,w),d))},scale:(g,w)=>P(f(ct(g,0,0,w),d)),shear:(g,w)=>P(f(ct(1,w,g,1),d)),get:()=>[...d]}}e.matrixBuilder=P;function L(l){const[d,g,w,T,G,W]=l;return`matrix(${d}, ${T}, ${g}, ${G}, ${w}, ${W})`}e.toCSS=L,e.identity=P().get()})(p||(p={}));function ct(e=1,t=0,n=0,a=1,s=0,i=0){return[e,n,s,t,a,i]}const He=Symbol("ViewTransformKey"),ze=Symbol("UserTransformKey");function ia(){const e=I(p.identity);return Ot(He,e),e}function Z(){return Bt(He,I(p.identity))}function Ue(){const e=it(),t=I(p.identity),n=I(p.identity);return at([e,t],()=>{n.value=p.matrixMult(e.value,t.value)},{immediate:!0}),Ot(ze,n),[t,n]}function it(){return Bt(ze,I(p.identity))}function ra(e){const t=I(!1),n=I(0);return Dt(()=>{at(e,(a,s,i)=>{if(!e.value||!window)return;const r=()=>{t.value=!1,clearTimeout(n.value),n.value=setTimeout(()=>{t.value=!0},500)};window.addEventListener("scroll",r),i(()=>window.removeEventListener("scroll",r))},{immediate:!0})}),{wheelEnabled:t,handleMouseMove:()=>{t.value=!0}}}function oa(e,t){const n=I(p.identity),a=I(p.identity);function s(){a.value=n.value}function i({zoom:r,pan:o}){const c=1/((r==null?void 0:r.scale)??1),h=(r==null?void 0:r.at)??[0,0],f=a.value[0],v=1/Gt(t)/f,m=1/Gt(e)/f,y=We(c,v,m),M=p.matrixBuilder(a.value).translate(...p.scale(h,-1)).scale(y,y).translate(...p.scale(h,1)).translate(...o??[0,0]).get();n.value=M}return ut({matrix:n,setBase:s,move:i})}const la=["tabindex"],ua=["width","height","viewBox"],Is=C({__name:"Mafs",props:{width:{default:"auto"},height:{default:500},pan:{type:Boolean,default:!0},zoom:{type:[Boolean,Object],default:!1},viewBox:{default:e=>({x:[-3,3],y:[-3,3]})},preserveAspectRatio:{type:[String,Boolean],default:"contain"}},emits:["onClick"],setup(e,{emit:t}){const n=e,a=Jn(),s=ia(),i=sa();ea(a),Ue();const r=I(null),o=I(!1);Dt(()=>{setTimeout(()=>{o.value=!0})});const c=x(()=>n.width==="auto"?"100%":`${n.width}px`),h=I(500);vn(r,l=>{const d=l[0];h.value=d.contentRect.width});const f=x(()=>{let l=1,d=1;if(typeof n.zoom=="object"){const g=n.zoom;l=g.min,d=g.max}else n.zoom&&(l=.5,d=5);return{minZoom:l,maxZoom:d}}),v=oa(vt(f.value.minZoom),vt(f.value.maxZoom)),m=vt(n.height),y=ut({x:0,y:0});at([h,v],()=>{var l,d,g,w,T,G,W,z,J;const U=((l=n.viewBox)==null?void 0:l.padding)??.5;let B=(((g=(d=n.viewBox)==null?void 0:d.x)==null?void 0:g[0])??0)-U,j=(((T=(w=n.viewBox)==null?void 0:w.x)==null?void 0:T[1])??0)+U,Y=(((W=(G=n.viewBox)==null?void 0:G.y)==null?void 0:W[0])??0)-U,F=(((J=(z=n.viewBox)==null?void 0:z.y)==null?void 0:J[1])??0)+U;if(n.preserveAspectRatio==="contain"){const Ut=h.value/m.value;if((j-B)/(F-Y)>Ut){const St=(F+Y)/2,bt=(j-B)/Ut/2;Y=St-bt,F=St+bt}else{const St=(j+B)/2,bt=(F-Y)*Ut/2;B=St-bt,j=St+bt}}[B,Y]=p.transform([B,Y],v.matrix),[j,F]=p.transform([j,F],v.matrix);const Ct=j-B,te=F-Y,Fe=H(1/Ct*h.value,5),Xe=H(-1/te*m.value,5);s.value=p.matrixBuilder().scale(Fe,Xe).get(),y.x=H(B/(j-B)*h.value,10),y.y=H(F/(Y-F)*m.value,10),[a.xMin,a.xMax,a.yMin,a.yMax,a.width,a.height]=[B,j,Y,F,h.value,m.value],[i.xSpan,i.ySpan]=[Ct,te]},{immediate:!0});const M=vt(!!n.zoom),u=ra(M),b=x(()=>p.matrixInvert(s.value)),_=I([0,0]),D=I([0,0]);function P(l){const d=r.value.getBoundingClientRect();return p.transform([l[0]-d.left+y.x,l[1]-d.top+y.y],b.value)}const L=Zn({onDrag:({movement:l,memo:d=[0,0],first:g,event:w})=>{if(w==null||w.stopPropagation(),g&&v.setBase(),p.mag(l)===0)return;const[T,G]=p.sub(l,d);return v.move({pan:[-T/h.value*i.xSpan,G/m.value*i.ySpan]}),g?l:d},onPinch:({first:l,movement:[d],origin:g,event:w,last:T})=>{if(!w.currentTarget||!b.value)return;l&&(v.setBase(),_.value=g,D.value=n.pan?P(g):[(a.xMin+a.xMax)/2,(a.yMin+a.yMax)/2]);let G=[0,0];n.pan&&(G=p.transform(p.sub(g,_.value),b.value)),v.move({zoom:{at:D.value,scale:d},pan:p.scale(G,-1)}),T&&v.setBase()},onWheel:({pinching:l,event:d,delta:[,g]})=>{if(l)return;d.preventDefault();const w=2/(1+Math.exp(-g/300)),T=P([d.clientX,d.clientY]);v.setBase(),v.move({zoom:{at:T,scale:1/w}})},onMousemove:()=>{M.value&&u.handleMouseMove()},onKeydown:({event:l})=>{const d=l;if(d.metaKey)return;const g={Equal:1,Minus:-1}[d.code]??0;if(!g)return;let w=.1;(d.altKey||d.metaKey)&&(w=.01),d.shiftKey&&(w=.3);const T=1+g*w,G=[(a.xMax+a.xMin)/2,(a.yMax+a.yMin)/2];v.setBase(),v.move({zoom:{at:G,scale:T}})},onClick:({event:l})=>{var d;const g=l,w=(d=r==null?void 0:r.value)==null?void 0:d.getBoundingClientRect(),T=g.clientX-w.left,G=w.bottom-g.clientY,W=T/h.value*i.xSpan+a.xMin,z=G/m.value*i.ySpan+a.yMin;t("onClick",[W,z],g)}},{domTarget:r,drag:{enabled:n.pan,threshold:1},pinch:{enabled:!!n.zoom},wheel:{enabled:u.wheelEnabled.value},eventOptions:{passive:!1}});return de(()=>{L.config.wheel.enabled=u.wheelEnabled.value}),(l,d)=>(S(),E("div",{ref_key:"rootRef",ref:r,class:"MafsView",tabindex:l.pan||f.value?0:1,style:R({width:c.value})},[(S(),E("svg",{width:h.value,height:m.value,viewBox:`${y.x} ${y.y} ${h.value} ${m.value}`,preserveAspectRatio:"xMidYMin",style:R({width:c.value,touchAction:n.pan?"none":"auto","--mafs-view-transform":k(p).toCSS(k(s)),"--mafs-user-transform":"transform(0,0)"})},[o.value?nt(l.$slots,"default",{key:0}):N("",!0)],12,ua))],12,la))}}),et={foreground:"var(--mafs-fg)",background:"var(--mafs-bg)",red:"var(--mafs-red)",orange:"var(--mafs-orange)",green:"var(--mafs-green)",blue:"var(--mafs-blue)",indigo:"var(--mafs-indigo)",violet:"var(--mafs-violet)",pink:"var(--mafs-pink)",yellow:"var(--mafs-yellow)"};var wt=(e=>(e[e.N=0]="N",e[e.NE=1]="NE",e[e.E=2]="E",e[e.SE=3]="SE",e[e.S=4]="S",e[e.SW=5]="SW",e[e.W=6]="W",e[e.NW=7]="NW",e))(wt||{}),K=(e=>(e[e.HORIZONGTAL=0]="HORIZONGTAL",e[e.VERTICAL=1]="VERTICAL",e))(K||{});const pt={color:et.foreground,weight:2,fillOpacity:.15,strokeOpacity:1,strokeStyle:"solid"},Q={color:et.foreground,weight:2,opacity:1,strokeStyle:"solid"},ca=["x","y"],Ps=C({name:"Text",__name:"Text",props:{color:{default:et.foreground},size:{default:30},attachDistance:{default:0},attach:{},x:{},y:{}},setup(e){const t=e,n=Z(),a=it(),s=I("middle"),i=I("middle"),r=I([0,0]);at([()=>t.attach,()=>t.attachDistance],([c,h])=>{let f=0;c==wt.W?(s.value="end",f=-1):c==wt.E&&(s.value="start",f=1);let v=0;c==wt.N?(i.value="baseline",v=1):c==wt.S&&(i.value="hanging",v=-1),(f!==0||v!==0)&&(r.value=p.withMag([f,v],h))},{immediate:!0});const o=x(()=>p.transform([t.x,t.y],p.matrixMult(n.value,a.value)));return(c,h)=>(S(),E("text",{class:"mafs-shadow",x:o.value[0]+r.value[0],y:o.value[1]+r.value[1],style:R({fill:c.color,fontSize:c.size,dominantBaseline:i.value,textAnchor:s.value,vectorEffect:"non-scaling-stroke"})},[nt(c.$slots,"default")],12,ca))}}),Ve=C({__name:"Polybase",props:{filled:{},type:{default:"polygon"},points:{}},setup(e){const t=e,n=it(),a=x(()=>({...pt,...t.filled})),s=x(()=>t.points.map(i=>p.transform(i,n.value).join(" ")).join(" "));return(i,r)=>(S(),q(on(i.type),{points:s.value,strokeWidth:a.value.weight,"stroke-dasharray":a.value.strokeStyle==="dashed"?"4,3":void 0,style:R({fill:a.value.color,fillOpacity:a.value.fillOpacity,stroke:a.value.color,strokeOpacity:a.value.strokeOpacity,strokeWidth:a.value.weight,strokeLinejoin:"round",vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)"})},null,8,["points","strokeWidth","stroke-dasharray","style"]))}}),ha=C({name:"Polygon",__name:"Polygon",props:{filled:{default:e=>pt},points:{}},setup(e){const t=e;return(n,a)=>(S(),q(Ve,an(sn(t)),null,16))}}),Cs=C({name:"Polyline",__name:"Polyline",props:{filled:{default:e=>pt},points:{}},setup(e){const t=e,n=x(()=>({...pt,fillOpacity:0,...t.filled}));return(a,s)=>(S(),q(Ve,{type:"polyline",points:a.points,filled:n.value},null,8,["points","filled"]))}}),fa=["rx","ry","stroke-width","stroke-dasharray","transform"],da=C({name:"Ellipse",__name:"Ellipse",props:{filled:{default:e=>pt},center:{default:e=>[0,0]},radius:{default:e=>[1,1]},angle:{default:0}},setup(e){const t=e,n=Z(),a=it(),s=x(()=>({...pt,...t.filled})),i=x(()=>p.matrixBuilder().translate(...t.center).mult(a.value).scale(1,-1).mult(n.value).scale(1,-1).get()),r=x(()=>`${p.toCSS(i.value)} rotate(${t.angle*(180/Math.PI)})`);return(o,c)=>(S(),E("ellipse",{cx:0,cy:0,rx:o.radius[0],ry:o.radius[1],"stroke-width":s.value.weight,"stroke-dasharray":s.value.strokeStyle==="dashed"?"4,3":void 0,transform:r.value,style:R({stroke:s.value.color,fill:s.value.color,fillOpacity:s.value.fillOpacity,strokeOpacity:s.value.strokeOpacity,vectorEffect:"non-scaling-stroke"})},null,12,fa))}}),pa=C({name:"Circle",__name:"Circle",props:{filled:{default:e=>pt},center:{default:e=>[0,0]},radius:{default:1}},setup(e){return(t,n)=>(S(),q(da,{center:t.center,radius:[t.radius,t.radius],filled:t.filled},null,8,["center","radius","filled"]))}}),va=["cx","cy"],Ls=C({name:"Point",__name:"Point",props:{color:{default:et.foreground},opacity:{default:1},x:{},y:{}},setup(e){const t=e,n=Z(),a=it(),s=x(()=>p.transform([t.x,t.y],p.matrixMult(n.value,a.value)));return(i,r)=>(S(),E("circle",{cx:s.value[0],cy:s.value[1],r:6,style:R({fill:i.color,opacity:i.opacity})},null,12,va))}});let ma=0;function Ke(){return ma++}const ya=["fill"],ga=["x1","y1","x2","y2","marker-end","stroke-dasharray"],As=C({name:"Vector",__name:"Vector",props:{stroked:{default:e=>Q},tail:{default:e=>[0,0]},tip:{default:e=>[1,1]}},setup(e){const t=e,n=Z(),a=it(),s=`mafs-triangle-${Ke()}`,i=x(()=>({...Q,...t.stroked})),r=x(()=>{const o=p.matrixMult(n.value,a.value),c=p.transform(t.tail,o),h=p.transform(t.tip,o);return{pixelTail:c,pixelTip:h}});return(o,c)=>(S(),E("g",null,[O("defs",null,[O("marker",{id:s,markerWidth:8,markerHeight:8,refX:8,refY:4,orient:"auto"},[O("path",{d:"M 0 0 L 8 4 L 0 8 z",fill:i.value.color||"var(--mafs-fg)"},null,8,ya)])]),O("line",{x1:r.value.pixelTail[0],y1:r.value.pixelTail[1],x2:r.value.pixelTip[0],y2:r.value.pixelTip[1],"marker-end":`url(#${s})`,"stroke-dasharray":i.value.strokeStyle==="dashed"?"4,3":void 0,style:R({stroke:i.value.color,strokeOpacity:i.value.opacity,strokeWidth:i.value.weight,vectorEffect:"non-scaling-stroke"})},null,12,ga)]))}}),Kt=C({name:"Transform",__name:"Transform",props:{matrix:{},translate:{},scale:{},rotate:{},shear:{}},setup(e){const t=e,[n,a]=Ue();return at(t,()=>{let s=p.matrixBuilder();t.matrix&&(s=s.mult(t.matrix)),t.translate&&(s=s.translate(...t.translate)),t.scale&&(s=typeof t.scale=="number"?s.scale(t.scale,t.scale):s.scale(...t.scale)),t.shear&&(s=s.shear(...t.shear)),t.rotate&&(s=s.rotate(t.rotate)),n.value=s.get()},{immediate:!0}),(s,i)=>(S(),E("g",{style:R({"--mafs-user-transform":k(p).toCSS(k(a))})},[nt(s.$slots,"default")],4))}});function xa(e,t,n){const a=Math.floor(e/n)*n,s=Math.ceil(t/n)*n;return a===s-n?[a]:xt(a,s-n,n)}function Gs(e){return e===0?"0":Math.abs(Math.PI-e)<.001?"π":Math.abs(-Math.PI-e)<.001?"-π":`${H(e/Math.PI,5)}π`}function Sa(e){return(e%2+2)%2===0}function $s(e){return Sa(e)?e.toString():""}const ba=xt(0,2*Math.PI,Math.PI/12),Ma={class:"mafs-axis"},_a=["x","y","dominant-baseline","text-anchor"],wa={key:0,visibility:"hidden"},Nt=C({name:"Labels",__name:"Axis",props:{align:{default:K.HORIZONGTAL},separation:{}},setup(e){const t=e,n=Z(),a=st(),s=x(()=>!!kt().label),i=x(()=>t.align===K.VERTICAL?"central":"hanging"),r=x(()=>t.align===K.VERTICAL?void 0:"middle"),o=x(()=>t.align===K.VERTICAL?a.yPanes:a.xPanes),c=x(()=>t.align===K.VERTICAL?v=>5:v=>p.transform([v,0],n.value)[0]),h=x(()=>t.align===K.VERTICAL?v=>p.transform([0,v],n.value)[1]:v=>5),f=(v,m)=>xa(v,m,t.separation).filter(y=>Math.abs(y)>t.separation/1e6);return(v,m)=>(S(),E("g",Ma,[(S(!0),E(yt,null,gt(o.value,([y,M])=>(S(),E("g",{key:`${y}, ${M}`},[(S(!0),E(yt,null,gt(f(y,M),u=>(S(),E("text",{key:u,x:c.value(u),y:h.value(u),"dominant-baseline":i.value,"text-anchor":r.value,style:R({fill:"var(--mafs-origin-color)",paintOrder:"stroke"})},[s.value?nt(v.$slots,"label",{key:0,num:u}):nt(v.$slots,"default",{key:1,num:u},()=>[nn(ht(u)+" ",1),u<0?(S(),E("tspan",wa,"-")):N("",!0)])],12,_a))),128))]))),128))]))}}),lt={axis:!0,label:!0,lines:1},ka={fill:"none"},Ea=["width","height"],Da=["width","height","id"],Oa={stroke:"var(--grid-line-subdivision-color)"},Ta={key:0},Ia=["y2"],Pa=["x1","x2","y2"],Ca={key:1},La=["x2"],Aa=["y1","x2","y2"],Ga=["width","height","fill"],$a={stroke:"var(--mafs-line-color)"},Ra={key:0},Wa=["x2"],Na=["y1","x2","y2"],Ba={key:1},Ha=["y2"],za=["x1","x2","y2"],Ua=["x","y","width","height","fill"],Va={stroke:"var(--mafs-origin-color)"},Ka=["x1","x2"],ja=["y1","y2"],Ya={class:"mafs-shadow"},Rs=C({name:"Cartesian",__name:"Cartesian",props:{xAxis:{type:[Object,Boolean],default:e=>lt},yAxis:{type:[Object,Boolean],default:e=>lt},subdivisions:{type:[Number,Boolean],default:!1}},setup(e){const t=e,n=Z(),a=st(),s=`cartesian-${Ke()}`,i=x(()=>!!kt().xLabel),r=x(()=>!!kt().yLabel),o=x(()=>t.xAxis!==!1),c=x(()=>t.yAxis!==!1),h=x(()=>({subdivisions:t.subdivisions,...lt,...t.xAxis})),f=x(()=>({subdivisions:t.subdivisions,...lt,...t.yAxis})),v=x(()=>h.value.lines||1),m=x(()=>f.value.lines||1),y=x(()=>h.value.subdivisions||1),M=x(()=>f.value.subdivisions||1),u=x(()=>{const[b,_]=a.xPaneRange,[D,P]=a.yPaneRange,[L,l]=p.transform([b,D],n.value),[d,g]=p.transform([_,P],n.value),[w,T]=p.transform([v.value,-m.value],n.value),G=w/y.value,W=T/M.value;return{vxMin:L,vxMax:d,vyMin:l,vyMax:g,unitW:w,unitH:T,subUnitW:G,subUnitH:W}});return(b,_)=>(S(),E("g",ka,[O("pattern",{x:"0",y:"0",width:u.value.unitW,height:u.value.unitH,id:s,patternUnits:"userSpaceOnUse"},[O("pattern",{width:u.value.subUnitW,height:u.value.subUnitH,id:`${s}-subdivision`,patternUnits:"userSpaceOnUse"},[O("g",Oa,[o.value!==!1&&y.value>1?(S(),E("g",Ta,[O("line",{x1:0,y1:0,x2:0,y2:u.value.subUnitH},null,8,Ia),O("line",{x1:u.value.subUnitW,y1:0,x2:u.value.subUnitW,y2:u.value.subUnitH},null,8,Pa)])):N("",!0),c.value!==!1&&M.value>1?(S(),E("g",Ca,[O("line",{x1:0,y1:0,x2:u.value.subUnitW,y2:0},null,8,La),O("line",{x1:0,y1:u.value.subUnitH,x2:u.value.subUnitW,y2:u.value.subUnitH},null,8,Aa)])):N("",!0)])],8,Da),O("rect",{width:u.value.unitW,height:u.value.unitH,fill:`url(#${s}-subdivision)`},null,8,Ga),O("g",$a,[c.value&&h.value.lines?(S(),E("g",Ra,[O("line",{x1:0,y1:0,x2:u.value.unitW,y2:0},null,8,Wa),O("line",{x1:0,y1:u.value.unitH,x2:u.value.unitW,y2:u.value.unitH},null,8,Na)])):N("",!0),o.value&&f.value.lines?(S(),E("g",Ba,[O("line",{x1:0,y1:0,x2:0,y2:u.value.unitH},null,8,Ha),O("line",{x1:u.value.unitW,y1:0,x2:u.value.unitW,y2:u.value.unitH},null,8,za)])):N("",!0)])],8,Ea),O("rect",{x:u.value.vxMin,y:u.value.vyMax,width:u.value.vxMax-u.value.vxMin,height:u.value.vyMin-u.value.vyMax,fill:`url(#${s})`},null,8,Ua),O("g",Va,[o.value&&h.value.axis?(S(),E("line",{key:0,x1:u.value.vxMin,y1:0,x2:u.value.vxMax,y2:0},null,8,Ka)):N("",!0),c.value&&f.value.axis?(S(),E("line",{key:1,x1:0,y1:u.value.vyMin,x2:0,y2:u.value.vyMax},null,8,ja)):N("",!0)]),O("g",Ya,[o.value&&h.value.label?(S(),q(Nt,{key:0,align:k(K).HORIZONGTAL,separation:v.value},At({_:2},[i.value?{name:"label",fn:ft(({num:D})=>[nt(b.$slots,"xLabel",{num:D})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0),c.value&&f.value.label?(S(),q(Nt,{key:1,align:k(K).VERTICAL,separation:m.value},At({_:2},[r.value?{name:"label",fn:ft(({num:D})=>[nt(b.$slots,"yLabel",{num:D})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0)])]))}}),Fa={fill:"none"},Xa={stroke:"var(--grid-line-subdivision-color)"},qa=["x2","y2"],Qa={stroke:"var(--grid-line-subdivision-color)"},Za=["data-r","rx","ry"],Ja={stroke:"var(--mafs-line-color)"},ts=["data-r","rx","ry"],es={stroke:"var(--mafs-origin-color)"},ns=["x1","x2"],as=["y1","y2"],ss={class:"mafs-shadow"},Ws=C({name:"Polar",__name:"Polar",props:{xAxis:{type:[Object,Boolean],default:e=>lt},yAxis:{type:[Object,Boolean],default:e=>lt},lines:{default:1},subdivisions:{}},setup(e){const t=e,n=Z(),a=st(),s=x(()=>!!kt().xLabel),i=x(()=>!!kt().yLabel),r=x(()=>t.xAxis!==!1),o=x(()=>t.yAxis!==!1),c=x(()=>({...lt,...t.xAxis})),h=x(()=>({...lt,...t.yAxis})),f=x(()=>c.value.lines||t.lines||1),v=x(()=>h.value.lines||t.lines||1),m=x(()=>{const y=t.lines,M=t.subdivisions,[u,b]=a.xPaneRange,[_,D]=a.yPaneRange,[P,L]=p.transform([u,_],n.value),[l,d]=p.transform([b,D],n.value),[g,w]=p.transform([1,-1],n.value),T=[p.mag([u,_]),p.mag([u,D]),p.mag([b,_]),p.mag([b,D]),p.mag([(u+b)/2,(_+D)/2])],G=Math.min(...T)<Math.max(b-u,D-_)?0:Math.min(...T),W=Math.max(...T),z=Math.floor(G/y)*y,J=Math.ceil(W/y)*y,U=xt(z,J,y),B=M!=null?xt(z,J,y/M):[];return{vxMin:P,vxMax:l,vyMin:L,vyMax:d,scaleX:g,scaleY:w,maxRadius:J,rs:U,subRs:B}});return(y,M)=>(S(),E("g",Fa,[O("g",Xa,[(S(!0),E(yt,null,gt(k(ba),u=>(S(),E("line",{key:u,x1:0,y1:0,x2:Math.cos(u)*m.value.maxRadius*m.value.scaleX,y2:-Math.sin(u)*m.value.maxRadius*m.value.scaleY},null,8,qa))),128))]),O("g",Qa,[(S(!0),E(yt,null,gt(m.value.subRs,u=>(S(),E("ellipse",{key:u,"data-r":u,cx:0,cy:0,rx:u*m.value.scaleX,ry:u*m.value.scaleY},null,8,Za))),128))]),O("g",Ja,[(S(!0),E(yt,null,gt(m.value.rs,u=>(S(),E("ellipse",{key:u,"data-r":u,cx:0,cy:0,rx:u*m.value.scaleX,ry:u*m.value.scaleY},null,8,ts))),128))]),O("g",es,[r.value?(S(),E("line",{key:0,x1:m.value.vxMin,y1:0,x2:m.value.vxMax,y2:0},null,8,ns)):N("",!0),o.value?(S(),E("line",{key:1,x1:0,y1:m.value.vyMin,x2:0,y2:m.value.vyMax},null,8,as)):N("",!0)]),O("g",ss,[r.value&&c.value.label?(S(),q(Nt,{key:0,align:k(K).HORIZONGTAL,separation:f.value},At({_:2},[s.value?{name:"label",fn:ft(({num:u})=>[nt(y.$slots,"xLabel",{num:u})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0),o.value&&h.value.label?(S(),q(Nt,{key:1,align:k(K).VERTICAL,separation:v.value},At({_:2},[i.value?{name:"label",fn:ft(({num:u})=>[nt(y.$slots,"yLabel",{num:u})]),key:"0"}:void 0]),1032,["align","separation"])):N("",!0)])]))}}),is=["x1","y1","x2","y2","strokeWidth","opacity","stroke-dasharray"],rs=C({name:"ThroughPoints",__name:"ThroughPoints",props:{stroked:{default:e=>Q},point1:{default:e=>[0,0]},point2:{default:e=>[0,0]}},setup(e){const t=e,n=it(),a=st(),s=x(()=>({...Q,...t.stroked})),i=x(()=>{const[r,o]=a.xPaneRange,[c,h]=a.yPaneRange,f=p.transform(t.point1,n.value),v=p.transform(t.point2,n.value),m=(v[1]-f[1])/(v[0]-f[0]);let y,M;return Math.abs(Math.atan(m))>Math.PI/4?(y=[(c-f[1])/m+f[0],c],M=[(h-f[1])/m+f[0],h]):(y=[r,m*(r-f[0])+f[1]],M=[o,m*(o-f[0])+f[1]]),{offscreen1:y,offscreen2:M}});return(r,o)=>(S(),E("line",{x1:k(H)(i.value.offscreen1[0],2),y1:k(H)(i.value.offscreen1[1],2),x2:k(H)(i.value.offscreen2[0],2),y2:k(H)(i.value.offscreen2[1],2),strokeWidth:s.value.weight,opacity:s.value.opacity,"stroke-dasharray":s.value.strokeStyle==="dashed"?"4,3":void 0,style:R({stroke:s.value.color,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,is))}}),os=C({name:"PointAngle",__name:"PointAngle",props:{stroked:{default:e=>Q},point:{},angle:{}},setup(e){const t=e,n=x(()=>p.add(t.point,p.rotate([1,0],t.angle)));return(a,s)=>(S(),q(rs,{point1:a.point,point2:n.value,stroked:a.stroked},null,8,["point1","point2","stroked"]))}}),Ns=C({name:"PointSlope",__name:"PointSlope",props:{stroked:{default:e=>Q},point:{},slope:{}},setup(e){const t=e,n=x(()=>Math.atan(t.slope));return(a,s)=>(S(),q(os,{point:a.point,angle:n.value,stroked:a.stroked},null,8,["point","angle","stroked"]))}}),ls=["x1","y1","x2","y2","strokeWidth","opacity","strokeDasharray"],Bs=C({name:"Segment",__name:"Segment",props:{stroked:{default:e=>Q},point1:{default:e=>[0,0]},point2:{default:e=>[0,0]}},setup(e){const t=e,n=Z(),a=it(),s=x(()=>({...Q,...t.stroked})),i=x(()=>{const r=p.matrixMult(n.value,a.value),o=p.transform(t.point1,r),c=p.transform(t.point2,r);return{scaledPoint1:o,scaledPoint2:c}});return(r,o)=>(S(),E("line",{x1:k(H)(i.value.scaledPoint1[0],2),y1:k(H)(i.value.scaledPoint1[1],2),x2:k(H)(i.value.scaledPoint2[0],2),y2:k(H)(i.value.scaledPoint2[1],2),strokeWidth:s.value.weight,opacity:s.value.opacity,strokeDasharray:s.value.strokeStyle==="dashed"?"1,10":void 0,style:R({stroke:s.value.color})},null,12,ls))}});function je({domain:e,minDepth:t,maxDepth:n,threshold:a,fn:s,error:i,onPoint:r,midpoint:o}){const[c,h]=e;function f(v,m,y,M,u,b,_){const D=v+(m-v)*.5,P=s(D);if(u<t){f(v,D,!0,!1,u+1,b,P),f(D,m,!1,!0,u+1,P,_);return}if(u<n){const L=o(b,_);if(i(P,L)>a){f(v,D,!0,!1,u+1,b,P),f(D,m,!1,!0,u+1,P,_);return}}y&&r(v,b),r(D,P),M&&r(m,_)}f(c,h,!0,!0,0,s(c),s(h))}function us(e,t,n,a,s){let i="M ";return je({fn:e,error:(r,o)=>p.squareDist(r,o),onPoint:(r,[o,c])=>{Number.isFinite(o)&&Number.isFinite(c)&&(i+=`${o} ${c} L `)},midpoint:(r,o)=>p.midpoint(r,o),domain:t,minDepth:n,maxDepth:a,threshold:s}),i.substring(0,i.length-2)}function cs(e,t,n,a,s,i,r){const o={fill:"",upper:"",lower:""};let c="",h="",f=!1,v=0,m=0,y=0;function M(u,b){return e==="x"?`${u} ${b}`:`${b} ${u}`}return je({domain:a,minDepth:s,maxDepth:i,threshold:r,fn:u=>[[u,n(u)],[u,t(u)]],error:([u,b],[_,D])=>Math.max(p.squareDist(u,_),p.squareDist(b,D)),midpoint:([u,b],[_,D])=>[p.midpoint(u,_),p.midpoint(b,D)],onPoint:(u,[[,b],[,_]])=>{const D=_<b&&!f,P=_>b&&f;if(D){if(f=!0,c&&h){const L=(v+u)/2,l=(m+_)/2,d=(y+b)/2,g=(l+d)/2;c+=` ${M(L,g)} L `,h=` ${M(L,g)} L `+h,o.fill+=` M ${c} ${h.substring(0,h.length-2)} z `,o.upper+=` M ${c.substring(0,c.length-2)} `,o.lower+=` M ${h.substring(0,h.length-2)} `,c="",h=""}}else if(P){f=!1;const L=(v+u)/2,l=(m+_)/2,d=(y+b)/2,g=(l+d)/2;c+=` ${M(L,g)} L `,h=` ${M(L,g)} L `+h}f||(Number.isFinite(_)&&(c=c+` ${M(u,_)} L `),Number.isFinite(b)&&(h=` ${M(u,b)} L `+h)),v=u,m=_,y=b}}),c&&h&&(o.fill+=` M ${c} ${h.substring(0,h.length-2)} z `,o.lower+=` M ${h.substring(0,h.length-2)} `,o.upper+=` M ${c.substring(0,c.length-2)} `),o}function hs(e){const t=[],n=1/e;for(let a=1;a>0;a-=n){const s={d:"",opacity:a};t.push(s)}return t}function fs(e,t){t=We(t,0,1);const n=e.length-1-Math.round(t*(e.length-1));return e[n]}const ds=["d"],Ye=C({name:"Parametric",__name:"Parametric",props:{stroked:{default:e=>Q},xy:{},t:{},minSamplingDepth:{default:8},maxSamplingDepth:{default:14}},setup(e){const t=e,n=Z(),a=x(()=>({...Q,...t.stroked})),s=x(()=>{const i=.1/-p.det(n.value);return us(t.xy,t.t,t.minSamplingDepth,t.maxSamplingDepth,i)});return(i,r)=>(S(),E("path",{d:s.value,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",style:R({stroke:a.value.color,strokeOpacity:a.value.opacity,strokeWidth:a.value.weight,strokeDasharray:a.value.strokeStyle==="dashed"?"1,10":void 0,vectorEffect:"non-scaling-stroke",transform:"var(--mafs-view-transform)"})},null,12,ds))}}),Hs=C({name:"OfX",__name:"OfX",props:{stroked:{default:e=>Q},y:{},minSamplingDepth:{},maxSamplingDepth:{}},setup(e){const t=e,n=st(),a=x(()=>i=>[i,t.y(i)]),s=x(()=>n.xPaneRange);return(i,r)=>(S(),q(Ye,{xy:a.value,t:s.value,minSamplingDepth:i.minSamplingDepth,maxSamplingDepth:i.maxSamplingDepth,stroked:i.stroked},null,8,["xy","t","minSamplingDepth","maxSamplingDepth","stroked"]))}}),zs=C({name:"OfX",__name:"OfY",props:{stroked:{default:e=>Q},x:{},minSamplingDepth:{},maxSamplingDepth:{}},setup(e){const t=e,n=st(),a=x(()=>i=>[t.x(i),i]),s=x(()=>n.yPaneRange);return(i,r)=>(S(),q(Ye,{xy:a.value,t:s.value,minSamplingDepth:i.minSamplingDepth,maxSamplingDepth:i.maxSamplingDepth,stroked:i.stroked},null,8,["xy","t","minSamplingDepth","maxSamplingDepth","stroked"]))}});var tt=(e=>(e[e.UNBOUNDED=0]="UNBOUNDED",e[e.EQUAL=1]="EQUAL",e[e.INEQUAL=2]="INEQUAL",e))(tt||{});const ps=["d"],vs=["d","strokeDasharray"],ms=["d","strokeDasharray"],Us=C({name:"Inequality",__name:"Inequality",props:{x:{},y:{},color:{},weight:{},strokeColor:{},strokeOpacity:{},fillColor:{},fillOpacity:{},minSamplingDepth:{},maxSamplingDepth:{},upperColor:{},upperOpacity:{},upperWeight:{},lowerColor:{},lowerOpacity:{},lowerWeight:{}},setup(e){const t=e,n=({x:c,y:h,color:f=et.foreground,weight:v=2,strokeColor:m=f,strokeOpacity:y=1,fillColor:M=f,fillOpacity:u=.15,minSamplingDepth:b=10,maxSamplingDepth:_=14,upperColor:D=m,upperOpacity:P=y,upperWeight:L=v,lowerColor:l=m,lowerOpacity:d=y,lowerWeight:g=v})=>({x:c,y:h,color:f,weight:v,strokeColor:m,strokeOpacity:y,fillColor:M,fillOpacity:u,minSamplingDepth:b,maxSamplingDepth:_,upperColor:D,upperOpacity:P,upperWeight:L,lowerColor:l,lowerOpacity:d,lowerWeight:g}),a=x(()=>n(t)),s=st(),i=x(()=>{const c=t.y!==void 0?t.y:t.x;let h=tt.UNBOUNDED;return c!==void 0&&"<="in c&&(h=tt.EQUAL),c!==void 0&&"<"in c&&(h=tt.INEQUAL),h}),r=x(()=>{const c=t.y!==void 0?t.y:t.x;let h=tt.UNBOUNDED;return c!==void 0&&">="in c&&(h=tt.EQUAL),c!==void 0&&">"in c&&(h=tt.INEQUAL),h}),o=x(()=>{const c=t.y!==void 0?t.y:t.x,[h,f]=s.xPaneRange,[v,m]=s.yPaneRange,y=t.y!==void 0?[h,f]:[v,m],M=t.y!==void 0?[v,m]:[h,f];let u=c["<"]??c["<="]??(()=>M[1]),b=c[">"]??c[">="]??(()=>M[0]);if(typeof u=="number"){const _=u;u=()=>_}if(typeof b=="number"){const _=b;b=()=>_}return cs(t.y!==void 0?"x":"y",u,b,y,a.value.minSamplingDepth,a.value.maxSamplingDepth,.1)});return(c,h)=>(S(),E("g",null,[O("path",{d:o.value.fill,style:R({fill:a.value.fillColor,fillOpacity:a.value.fillOpacity,stroke:"none",transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,ps),i.value!=k(tt).UNBOUNDED?(S(),E("path",{key:0,d:o.value.upper,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:i.value===k(tt).INEQUAL?"4,8":"",style:R({fill:"none",stroke:a.value.upperColor,strokeOpacity:a.value.upperOpacity,strokeWidth:a.value.upperWeight,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,vs)):N("",!0),r.value!=k(tt).UNBOUNDED?(S(),E("path",{key:1,d:o.value.lower,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:r.value===k(tt).INEQUAL?"4,8":"",style:R({fill:"none",stroke:a.value.lowerColor,strokeOpacity:a.value.lowerOpacity,strokeWidth:a.value.lowerWeight,transform:"var(--mafs-view-transform)",vectorEffect:"non-scaling-stroke"})},null,12,ms)):N("",!0)]))}}),ys=["d"],Vs=C({name:"VectorField",__name:"VectorField",props:{xy:{type:Function},xyOpacity:{type:Function},step:{},opacityStep:{},color:{}},setup(e){const t=e,n=()=>1,a=({xy:c,step:h=1,xyOpacity:f=n,opacityStep:v=f===n?1:.2,color:m=et.foreground})=>({xy:c,step:h,xyOpacity:f,opacityStep:v,color:m}),s=x(()=>a(t)),i=Z(),r=st(),o=x(()=>{let c=Math.min(1,Math.max(.01,s.value.opacityStep));const h=Math.ceil(1/c);function f(m,y,M,u,b){const _=s.value.step,D=s.value.xy,P=s.value.xyOpacity;for(let L=Math.floor(y);L<=Math.ceil(M);L+=_)for(let l=Math.floor(u);l<=Math.ceil(b);l+=_){const d=[L,l],g=D([L,l]),w=p.mag(g),T=p.scale(p.normalize(g),Math.min(w,_*.75)),G=p.add(d,T),W=p.transform(d,i.value),z=p.transform(T,i.value),J=p.mag(z),U=p.transform(G,i.value),B=p.scale(p.normalize(z),Math.min(J,5)),j=p.add(U,p.rotate(B,5/6*Math.PI)),Y=p.add(U,p.rotate(B,-(5/6)*Math.PI)),F=P([L,l]),Ct=fs(m,F);Ct.d+=` M ${W[0]} ${W[1]} L ${U[0]} ${U[1]}  L ${j[0]} ${j[1]}  L ${Y[0]} ${Y[1]}  L ${U[0]} ${U[1]} `}}const v=hs(h);for(const[m,y]of r.xPanes)for(const[M,u]of r.yPanes)f(v,m,y,M,u);return v});return(c,h)=>(S(!0),E(yt,null,gt(o.value,(f,v)=>(S(),E("path",{d:f.d,key:v,style:R({stroke:s.value.color,fill:s.value.color,opacity:f.opacity,fillOpacity:f.opacity,strokeOpacity:f.opacity}),strokeLinecap:"round",strokeLinejoin:"round"},null,12,ys))),128))}}),gs=["cx","cy"],xs=["r","cx","cy"],Ss=["cx","cy"],bs=["cx","cy"],jt=15,Yt=C({name:"MovablePoint",__name:"MovablePoint",props:{color:{default:et.pink},ctx:{}},setup(e){const t=e,n=Z(),a=it(),s=I(),i=I([0,0]),r=I(!1),o=x(()=>p.transform(t.ctx.point,p.matrixMult(n.value,a.value)));return Un(c=>{const{last:h,movement:f,first:v,event:m}=c;m==null||m.stopPropagation();const y=t.ctx.point;if(r.value=!h,v&&(i.value=p.transform(y,a.value)),p.mag(f)===0)return;const M=p.matrixInvert(n.value),u=p.matrixInvert(a.value),b=p.transform(f,M??p.identity);t.ctx.setPoint(p.transform(p.add(i.value,b),u??p.identity))},{domTarget:s,eventOptions:{passive:!1}}),(c,h)=>(S(),E("g",{ref_key:"rootRef",ref:s,class:rn(`mafs-movable-point ${r.value?"mafs-movable-point-dragging":""}`),style:R({"--movable-point-color":t.color,"--movable-point-ring-size":`${jt}px`}),tabindex:0},[O("circle",{class:"mafs-movable-point-hitbox",r:30,cx:o.value[0],cy:o.value[1]},null,8,gs),O("circle",{class:"mafs-movable-point-focus",r:jt+1,cx:o.value[0],cy:o.value[1]},null,8,xs),O("circle",{class:"mafs-movable-point-ring",r:jt,cx:o.value[0],cy:o.value[1]},null,8,Ss),O("circle",{class:"mafs-movable-point-point",r:6,cx:o.value[0],cy:o.value[1]},null,8,bs)],6))}});function Ft(e,{constrain:t=n=>n}={}){const[n,a]=e,s=I(e);let i=([r,o])=>[r,o];return t===K.HORIZONGTAL?i=([r,o])=>[r,a]:t===K.VERTICAL?i=([r,o])=>[n,o]:typeof t=="function"&&(i=t),ut({point:s,setPoint:r=>{s.value=i(r)}})}function Ks(e){const{startTime:t=0,endTime:n=1/0}=e||{},a=I(null),s=vt(t),i=I(!1);return Dt(()=>{at(i,(r,o,c)=>{if(!window)return;let h=-1;const f=Gt(n);function v(m){m=m/1e3,a.value||(a.value=m);const y=m-a.value;if(y>=f){a.value=null,s.value=f,i.value=!1;return}s.value=Math.min(y,f),h=window.requestAnimationFrame(v)}i.value?h=window.requestAnimationFrame(v):window.cancelAnimationFrame(h),c(()=>window.cancelAnimationFrame(h))},{immediate:!0})}),{time:s,playing:i,setTime:r=>{s.value=r*1e3},start:()=>{i.value=!0},stop:()=>{a.value=null,s.value=Gt(t),i.value=!1}}}const js=C({__name:"TransformWidget",setup(e){const t=Ft([0,0]),n=Ft([1,1]),a=Ft([1,0],{constrain:i=>p.normalize(i)}),s=x(()=>Math.atan2(a.point[1],a.point[0]));return(i,r)=>(S(),E("g",null,[rt(Kt,{translate:k(t).point},{default:ft(()=>[rt(Kt,{rotate:s.value},{default:ft(()=>[rt(Kt,{scale:k(n).point},{default:ft(()=>[nt(i.$slots,"default"),rt(ha,{points:[[0,0],[0,1],[1,1],[1,0]],filled:{color:k(et).blue}},null,8,["filled"])]),_:3},8,["scale"]),rt(pa,{center:[0,0],radius:1,filled:{strokeStyle:"dashed",strokeOpacity:.5,fillOpacity:0,color:k(et).green}},null,8,["filled"]),rt(Yt,{ctx:k(n),color:k(et).blue},null,8,["ctx","color"])]),_:3},8,["rotate"]),rt(Yt,{ctx:k(a),color:k(et).green},null,8,["ctx","color"])]),_:3},8,["translate"]),rt(Yt,{ctx:k(t)},null,8,["ctx"])]))}}),Ms={class:"mafs-shadow",fontFamily:"monospace"},_s=["x","y"],ws=["x","y"],ks=["x","y"],Es=["x","y"],Ys=C({name:"ViewportInfo",__name:"ViewportInfo",props:{precision:{default:3}},setup(e){const t=ta(),n=st(),a=Z(),s=x(()=>p.transform([t.xMin,t.yMin],a.value)),i=x(()=>n.xPanes.map(o=>`(${o.join(", ")})`).join("   ")),r=x(()=>n.yPanes.map(o=>`(${o.join(", ")})`).join("   "));return(o,c)=>(S(),E("g",Ms,[O("text",{x:s.value[0]+10,y:s.value[1]-70}," x: "+ht(k(t).xMin.toFixed(o.precision))+", "+ht(k(t).xMax.toFixed(o.precision)),9,_s),O("text",{x:s.value[0]+10,y:s.value[1]-50}," y: "+ht(k(t).yMin.toFixed(o.precision))+", "+ht(k(t).yMax.toFixed(o.precision)),9,ws),O("text",{x:s.value[0]+10,y:s.value[1]-30}," xPanes: "+ht(i.value),9,ks),O("text",{x:s.value[0]+10,y:s.value[1]-10}," yPanes: "+ht(r.value),9,Es)]))}});export{Kt as $,Gs as B,Ls as D,Is as E,Ns as F,Ys as G,zs as H,Cs as I,js as K,Rs as N,Yt as P,it as Q,Ps as R,Ft as S,As as U,Ws as V,$s as W,et as X,Vs as Y,Z as a,K as b,p as c,da as d,Bs as e,wt as f,Us as g,Ye as h,Ts as i,Ke as j,os as l,ha as p,Ks as q,rs as r,Os as u,pa as v,Hs as z};
